!function e(t,i,s){function n(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var h=i[o]={exports:{}};t[o][0].call(h.exports,function(e){var i=t[o][1][e];return n(i?i:e)},h,h.exports,e,t,i,s)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(e){e("./public/gameList"),e("./public/topnav"),e("./public/sideServer"),e("./public/tab"),e("./public/slide"),e("./public/pagination"),e("./public/gwLogin"),e("./public/ranking"),e("./public/code"),e("./public/dialog"),e("./public/gallery"),e("./public/foot"),e("../module/plugins/ImgLogger")(),-1!==document.cookie.indexOf("in_client=1")&&$("head").append('<style type="text/css">*{scrollbar-face-color:#4f4f4f; /*面子*/scrollbar-arrow-color:#C0C0C0; /*箭头*/scrollbar-3dlight-color:#303030; /*最外左*/scrollbar-highlight-color:#303030; /*左二*/scrollbar-shadow-color:#303030; /*右二*/scrollbar-darkshadow-color:#303030; /*右一*/scrollbar-track-color:#303030; /*滑道*/}</style>'),e("../module/plugins/onlineTime")},{"../module/plugins/ImgLogger":22,"../module/plugins/onlineTime":27,"./public/code":2,"./public/dialog":3,"./public/foot":4,"./public/gallery":5,"./public/gameList":6,"./public/gwLogin":9,"./public/pagination":10,"./public/ranking":12,"./public/sideServer":13,"./public/slide":14,"./public/tab":15,"./public/topnav":16}],2:[function(e){function t(){$.getJSON(s.GAMES_API+"&jsoncallback=?&game_id="+window.gsConfig.id,function(e){var t='<option value="">'+n.L("Ui_Tip_SelectServer")+"</option>";$.each(e,function(e){t+='<option value="'+e+'">'+this.servername+"</option>"}),o.html(t)})}function i(){return user_action.is_login()?void $.getJSON(s.GS_CODE_API+"&jsoncallback=?&gameid="+window.gsConfig.id+"&serverid="+o.val(),function(e){if(!e.status)return void alert(e.message);var t='<p>Your code is:</p><p style="color:#9D190D;">'+e.data+"</p>";a.html(t),r.emit("code")}):void user_action.login()}var s=e("../../module/global"),n=e("../../module/lang"),r=e("../../module/plugins/events")();e("../../module/user/user_action");var o=$("[data-code_servers]"),a=$("[data-code]"),l=$("[data-get_code_btn]");o.length&&t(),l.on("click",function(){return o.val()?void i():void alert(n.L("Ui_Tip_SelectServer"))}).data("code",r)},{"../../module/global":17,"../../module/lang":18,"../../module/plugins/events":25,"../../module/user/user_action":58}],3:[function(e){var t=e("../../module/ui/simpleDialog").Dialog,i=e("./getOptsByConf");$('[data-fn="dialog"],[data-dialog]').each(function(){var e={};e=$(this).is("[data-dialog]")?i(this,"dialog"):i(this);var s=new t($.extend({dialog:this,closeBtn:$(this).find("[data-closebtn]")},e));e.switchEle&&$(e.switchEle).on("click",function(){s.show()}),$(this).data("dialog",s)})},{"../../module/ui/simpleDialog":48,"./getOptsByConf":8}],4:[function(){var e=window.gsConfig.findUs||{},t=$("[data-findus]");for(var i in e){var s=t.find("[data-"+i+"]");e[i]?s.attr("href",e[i]).show():s.remove()}},{}],5:[function(e){var t=e("../../module/ui/gallery").Gallery,i=e("./getOptsByConf");$('[data-fn="gallery"],[data-gallery]').each(function(){var e={};e=$(this).is("[data-gallery]")?i(this,"gallery"):i(this);var s=[];$(e.navItems).each(function(){s.push($(this).attr("data-gsrc"))});var n=new t($.extend({wrapper:this,srcs:s,nextBtn:$(this).find("[data-next]"),prevBtn:$(this).find("[data-prev]"),loading:$(this).find("[data-loading]"),srcEle:$(this).find("[data-srcele]")},e));$(this).data("gallery",n)})},{"../../module/ui/gallery":43,"./getOptsByConf":8}],6:[function(e){e("../../module/ui/game_picker");var t=e("./getOptsByConf");$('[data-fn="game_picker"],[data-game_picker]').each(function(){var e={};e=$(this).is("[data-game_picker]")?t(this,"game_picker"):t(this),$(this).gamePicker(e)})},{"../../module/ui/game_picker":44,"./getOptsByConf":8}],7:[function(e,t){t.exports=function(e){return $(e).html().replace(/ data-src_in_tpl="/g,' src="').replace(/ style="display:none;?"/,"")}},{}],8:[function(e,t){t.exports=function(e,t){var i=(t?$(e).attr("data-"+t):$(e).attr("data-config")||"").replace(/\n/g,"").split(";"),s={};return $.each(i,function(){var e=this.split(":");s[$.trim(e.shift())]=$.trim(e.join(":"))}),s}},{}],9:[function(e){function t(){l.show(),h.hide(),p.length&&p.css({overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}).html((user_action.get_open_plat()?'<i class="i-s-'+user_action.get_open_plat()+'" style="float: none;display:inline-block;vertical-align: -2px;"></i>':"")+user_action.get_account()),f.length&&f.attr("src",user_action.get_user_img()),m.length&&s.getLastPlayServers(a,1)}function i(){l.hide(),h.show()}e("../../module/user/user_action");var s=e("../../module/user/getUserDatas"),n=e("../../module/lang"),r=e("../../module/ui/dialogTip"),o=e("../../module/global"),a=window.game_id||window.gsConfig&&window.gsConfig.id;$.fn.ff=function(e){var t=this.find(e);return t.length||(t=this.filter(e)),t};var l=$("[data-logined]"),h=$("[data-nologin]"),c=h.ff('input[name="login_id"]'),d=h.ff('input[name="login_pwd"]'),u=h.ff("[data-pwd_holder]"),p=l.ff("[data-username]"),f=l.ff("[data-userimg]"),m=l.ff("[data-lastplay]"),g=l.ff("[data-character]");user_action.on("login",t),user_action.on("logout",i),user_action.on("login_system_error",function(){alert(n.L("System_Error"))});var v={login_id:"",login_pwd:"",code:""};user_action.on("login_validate_error",function(e){var t="";switch(e){case"login_id required":t=n.L("Login_LoginId_Empty");break;case"login_pwd required":t=n.L("Login_Pwd_Empty");break;default:t=e}var i,s=e.split(" ").shift();s in v?(i=$('[name="'+s+'"]'),i.length&&i.is(":visible")||(i=$('[data-ref="'+s+'"]'))):i=$(":visible[data-submit_btn]"),r.show({ref:i,msg:t,lifeTime:2e3})}),c.length&&c[0].defaultValue&&c.on("focus",function(){this.value===this.defaultValue&&(this.value="")}).on("blur",function(){""===this.value&&(this.value=this.defaultValue)}),u.length&&(u.on("focus",function(){$(this).hide(),d.show().trigger("focus")}),d.on("blur",function(){this.value||($(this).hide(),u.show())})),s.on("getLastPlayServersDone",function(){var e=this.lastPlayServers[a][0];return e?(m.attr("href",o.BASE_URL+"/play/?game="+a+"&server="+e.server_id+("/micro/server/"===window.location.pathname?"&from=client":"")).html(e.server_name),void g.html(e.character)):void m.html("")}),user_action.is_login()?t():i()},{"../../module/global":17,"../../module/lang":18,"../../module/ui/dialogTip":42,"../../module/user/getUserDatas":54,"../../module/user/user_action":58}],10:[function(e){var t=e("../../module/ui/paging").Paging,i=e("./getOptsByConf");$('[data-fn="pagination"],[data-pagination]').each(function(){var e={};e=$(this).is("[data-pagination]")?i(this,"pagination"):i(this);var s=e.pagesContainer&&$(e.pagesContainer).html().replace(/\{%/g,"<%").replace(/%\}/g,"%>"),n=new t($.extend({pages:$(this).find("[data-pagesContainer]"),prev:$(this).find("[data-prev]"),next:$(this).find("[data-next]"),prevEllipsis:$(this).find("[data-prevellipsis]"),nextEllipsis:$(this).find("[data-nextellipsis]"),perPage:5,visiblePage:10,pageItemTpl:s},e));n.maxPageNum>1?$(this).show():$(this).hide(),$(this).data("pagination",n);var r=$(e.pageBoard);r.length&&(n.on("toPage",function(){r.text(this.currentPage+" / "+this.maxPageNum)}),n.toPage(1))})},{"../../module/ui/paging":45,"./getOptsByConf":8}],11:[function(e,t){function i(e){this.init(e)}var s=e("../../module/plugins/events"),n=e("../../module/plugins/parseTpl"),r=e("../../module/global"),o=e("../../module/plugins/resortByAttr");i.prototype=$.extend(s(),{init:function(e){this.initElements(e),this.initTabs(),this.bindEvents(),this.getServers()},initElements:function(e){this.$wrapper=$(e.wrapper),this.types=e.types.split(","),this.type=this.types[e.currentType||0],this.num=e.num||10,this.datas={},this.$serverSelect=$(e.serverSelect),this.$tabsContainer=$(e.tabsContainer),this.$ranksContainer=$(e.ranksContainer),this.serverItemTpl=e.serverItemTpl,this.tabItemTpl=e.tabItemTpl,this.tabContentTpl=e.tabContentTpl},initTabs:function(){this.$tabsContainer.html(n(this.tabItemTpl,{types:this.types,currentType:this.type},"{%","%}"))},bindEvents:function(){var e=this,t=function(){e.server=this.value,e.getDatas()};this.$serverSelect.is("select")&&this.$serverSelect.on("change",t),this.$serverSelect.is("[data-fuiselect]")&&this.$selectChange.data("fuiselect").on("change",t),this.$tabsContainer.on("click","[data-type]",function(){e.type=$(this).attr("data-type"),e.getDatas(),e.emit("toType")}),this.on("loading",function(){this.$ranksContainer.html("")})},getServers:function(){var e=this;$.getJSON(r.GAMES_API+"&jsoncallback=?&game_id="+window.gsConfig.id,function(t){$.each(t,function(e){this.serverid=e,this.servernum=+this.servernum||0}),e.$serverSelect.html(n(e.serverItemTpl,o(t,"servernum").reverse(),"{%","%}")),e.$serverSelect.trigger("change"),e.emit("serverLoad")})},getDatas:function(){var e=this;return this.emit("loading"),this.datas[this.type+"-"+this.server]?(this.emit("load"),void e.render()):void function(t,i,s){$.getJSON(r.GS_RANK_API+"&jsoncallback=?&game="+window.gsConfig.id+"&server="+t+"&type="+i+"&num="+s,function(i){t===e.server&&(e.datas[e.type+"-"+e.server]=i,e.emit("load"),e.render())})}(this.server,this.type,this.num)},render:function(){this.$ranksContainer.html(n(this.tabContentTpl,this.datas[this.type+"-"+this.server],"{%","%}")),this.emit("render")}}),t.exports=i},{"../../module/global":17,"../../module/plugins/events":25,"../../module/plugins/parseTpl":28,"../../module/plugins/resortByAttr":30}],12:[function(e){var t=e("./getOptsByConf"),i=e("./rank.js");$('[data-fn="ranking"],[data-ranking]').each(function(){var e={};e=$(this).is("[data-ranking]")?t(this,"ranking"):t(this);var s=$(this).find("[data-servers]"),n=$(this).find("[data-types]"),r=$(this).find("[data-ranks]"),o=new i($.extend({serverItemTpl:s.find('script[type="text/tpl"]').html(),tabItemTpl:n.find('script[type="text/tpl"]').html(),tabContentTpl:r.find('script[type="text/tpl"]').html(),serverSelect:s,tabsContainer:n,ranksContainer:r},e));o.on("toType",function(){this.$tabsContainer.is("select")||this.$tabsContainer.children().removeClass(e.currentTabCls).filter('[data-type="'+this.type+'"]').addClass(e.currentTabCls)}),$(this).data("ranking",o)})},{"./getOptsByConf":8,"./rank.js":11}],13:[function(e){function t(){$.getJSON(n.GAMES_API+"&jsoncallback=?&game_id="+window.gsConfig.id,function(t){function a(){user_action.is_login()?winServer.popup.show():(user_action.login(),user_action.once("login",function(){winServer.serverPicker.initLastPlayServers(),winServer.popup.show()}))}$('a[href*="server_pick=1"]').on("click",function(){return a(),!1}),window.winServer=e("../../module/ui/win_server").init({game:window.gsConfig.id,name:window.location.host.split(".").shift(),datas:t,serverItemTpl:'<li class="server-status" title="<% this.servername %>"><a href="'+n.BASE_URL+"/play/?game="+window.gsConfig.id+"&server=<% this.id %>\" target=\"_blank\"><i class=\"i-<% if(this.status === '0'){ %>offline<% } else if(this.status === '1'){ %>online<% } else if(this.status === '2'){ %>beta<% } %>\"></i><b><% if(this.servernum){ %><% } %><% this.servername %></b></a></li>"}),winServer.css.on("load",function(){winServer.popup.setPos(.5,.3)}),winServer.serverPicker.removeAllListeners("select"),window.showSp=a;var l=r.attr("data-num"),h="";l="all"===l?0:+l||5,$.each(t,function(e){this.serverid=e}),l?$.each(i(t,"servernum").reverse(),function(){return l--?void(h+=s(o,this,"{%","%}")):!1}):$.each(t,function(){h+=s(o,this,"{%","%}")}),r.html(h)})}var i=e("../../module/plugins/resortByAttr"),s=e("../../module/plugins/parseTpl"),n=e("../../module/global"),r=(e("./getInnerAsTpl"),$('[data-fn="side_server"],[data-side_server]')),o="<p></p>";if(r.length){var a=r.find('script[type="text/tpl"]');a.length||(a=r);var o=a.html().replace(/ style="display:none;?"/,"")}else r=$("<div></div>");t()},{"../../module/global":17,"../../module/plugins/parseTpl":28,"../../module/plugins/resortByAttr":30,"../../module/ui/win_server":52,"./getInnerAsTpl":7}],14:[function(e){e("../../module/plugins/slider");var t=e("./getOptsByConf");$('[data-fn="slide"],[data-slide]').each(function(){var e={};e=$(this).is("[data-slide]")?t(this,"slide"):t(this),$(this).slidesjs($.extend({eles:$(this).children(),effect:"fade",prevBtn:$(this).find("[data-prev]"),nextBtn:$(this).find("[data-next]"),nav:$(this).find("[data-navitem]"),activeNavCls:"active"},e))})},{"../../module/plugins/slider":41,"./getOptsByConf":8}],15:[function(e){var t=e("../../module/ui/tabs").Tab,i=e("./getOptsByConf");$('[data-fn="tab"],[data-tab]').each(function(){var e={};e=$(this).is("[data-tab]")?i(this,"tab"):i(this),$(this).data("tab",new t($.extend({tabs:$(this).children(),tabContents:$(this).find("[data-tabcontent]"),currentTabCls:"current"},e)))})},{"../../module/ui/tabs":50,"./getOptsByConf":8}],16:[function(e){var t=e("../../module/global"),i=$("#topnav .store");i.attr("href",i.attr("href")+(window.gsConfig&&window.gsConfig.id)),$(".drop-box").on("mouseover",function(){$(this).find(".drop-list").show()}).on("mouseleave",function(){$(this).find(".drop-list").hide()});var s=$('[href*="//purchase.r2games.com"],[href*="//store.r2games.com"]');s.attr("href",t.STORE_URL+"/?gid="+window.gsConfig.id),-1!==document.cookie.indexOf("in_client=1")&&($(".gm-offical-top").find("[data-logined] .i-drop, [data-logined] .drop-list").remove(),$('a[href$="'+t.BASE_URL+'"]').removeAttr("href"))},{"../../module/global":17}],17:[function(e,t,i){var s="//www.r2games.com",n="//purchase.r2games.com",r=e("./plat"),o="//r2cdn2.r2games.com/"+r,a="//log2.r2games.com/accesslog";switch(r){case"fr":s="//fr.r2games.com",o="//r2cdn2.r2games.com/fr",n="//fr.r2games.com/store";break;case"tr":s="//tr.r2games.com",o="//r2cdn2.r2games.com/tr",n="//tr.r2games.com/store";break;case"es":s="//es.r2games.com",o="//r2cdn2.r2games.com/es",n="//es.r2games.com/store";break;case"br":s="//br.r2games.com",o="//r2cdn2.r2games.com/br",n="//br.r2games.com/store";break;case"ru":s="//ru.r2games.com",o="//r2cdn2.r2games.com/ru",n="//ru.r2games.com/store";break;case"de":s="//de.r2games.com",o="//r2cdn2.r2games.com/de",n="//de.r2games.com/store";break;default:s="//www.r2games.com",o="//r2cdn2.r2games.com/en",n="//purchase.r2games.com"}i.PLATFORM=r,i.BASE_URL=s,i.LOG_URL=a,i.DOMAIN="r2games.com",i.USER_FORM_URL=s+"/user/?ac=userPopups",i.LOGIN_URL=s+"/user/?ac=login",i.CHECK_LOGIN_CODE=s+"?ct=user&ac=checkNeedCode",i.LOGIN_OUT_URL=s+"/user/?ac=loginOut",i.REG_URL=s+"/user/?ac=reg",i.CHECK_USER_EXISTS=s+"/user/?ac=isExists",i.STORE_URL=n,i.STATIC_URL=o,i.BLANK_IMG=o+"/blank.gif",i.MESSAGE_API=s+"/message",i.LAST_PLAY_GAME_API=s+"/?ct=game&ac=lastPlay",i.GAMES_API=s+"/?ct=game&ac=data",i.TICKET_SEARCH_API=s+"/support/?ac=search",i.TICKET_CATEGORY_API=s+"/support/?ac=getCategory",i.TICKET_PAYMENTMETHOD_API=s+"/support/?ac=getPayment",i.SUPPORT_VOTE_API=s+"/support/?ac=issueVote",i.TICKET_CLASSIFICATION_API="",i.CAPTCHA_API=s+"/?ct=captcha&ac=check",i.CAPTCHA_IMG=s+"/?ct=captcha",i.TICKET_SAVE_API=s+"/support/?ac=saveTicket",i.CHECK_USER_ACTIVE_API=s+"/user/?ct=security&ac=getUser",i.SEND_FORGET_EMAIL_API=s+"/user/?ct=security&ac=sendForgetMail",i.GS_RANK_API=s+"/?ct=rank",i.GS_CODE_API=s+"?ct=giftpack&ac=recruitCard",i.STORE_CHARACTER_API=n+"/?ac=getroles",i.CHARACTER_API=s+"/user/?ac=getCharacter",i.PWD_EMAIL_API=s+"/pwd/?ac=userMail",i.PWD_SENT_EMAIL_API=s+"/pwd/?ac=findByMail",i.PWD_SUBMIT_QUES_API=s+"/pwd/?ac=findByQuestion",i.QUES_SENT_EMAIL_API=s+"/safety/?ac=findSQByMail",i.SQ_SUBMIT_QUES_API=s+"/safety/?ac=findSQByQuestion",i.SAFE_LEVEL_API=s+"/user/?ac=getSafeLevel"},{"./plat":20}],18:[function(e,t){{var i;e("./plat")}i=e("./language/en"),t.exports.L=function(e){return"undefined"!=typeof i[e]?i[e]:e}},{"./language/en":19,"./plat":20}],19:[function(e,t){t.exports={System_Error:"Unknown system error",Reg_Email_Empty:"Please provide an email address",Reg_Email_ERROR:"Please enter a valid email address",Reg_Email_Exists:"Email already exists!",Reg_Email_Too_Long:"Email must be less than 36 characters",Reg_Pwd_Empty:"Please choose a password",Reg_Pwd_Error:"Passwords must be at least 8 characters",Reg_Pwd_Suggest:"Please choose a more complex password (numbers and letters)",Reg_Pwd_Equal_To_Account:"Please don’t use your username as a password",Reg_Pwd_Tip:"Combine letters, numbers and symbols to make your password strong!",Reg_Repeat_Pwd_Empty:"Please re-enter password",Reg_Repeat_Pwd_Error:"Passwords don't match",Reg_Age_Empty:"Age cannot be blank",Reg_Age_Error:"Incorrect age",Reg_Birthday_Empty:"Date of birth cannot be empty",Reg_Birthday_Error:"Date of birth is incorrect.",Account_Nick_Empty:"Please enter your nickname",Account_Nick_Error:"Please enter a valid nickname",Account_Nick_Too_Long:"Nickname must be less than 20 characters",Account_Not_Exist:"Account doesn’t exist!",Account_Email_Sent:"Email sent! If you cannot find it, please check your Spam folder",Must_Agree_Terms:"Choose Accept to continue",Login_LoginId_Empty:"Enter account info",Login_Pwd_Empty:"Enter your password",Login_Code_Empty:"Enter verification code",If_Del_Msg:"Are you sure you want to delete this message?",Activate_Mail_Empty:"Please provide an email address.",Old_Pwd_Empty:"Enter old password",New_Pwd_Empty:"Enter new password",Code_Cant_Empty:"Enter verification code",Code_Error:"Please enter the correct verification code.",Time_Left:"Time remaining:",Edit_Pwd_Error:"Password hasn’t been changed, please try again",Activate_Error:"Email hasn’t been activated, please try again.",Activate_Success_Confirm:"Email address activated.",Forgot_Pwd_Error:"Registration email hasn’t been sent, please try again.",Alert_Title:"Note",Confirm_Title:"Please confirm",Save_Success:"Saved!",Edit_Pwd_Success:"Password saved!",Edit_Pwd_Success_Confirm:"Password saved! Login again?",Game_Server_Error:"System error; server failure",Ticket_Upload_Size_Error:"Attachments must be under 1MB",Ticket_Captcha_Error:"Please enter the correct verification code.",Ticket_Require_Account:"Enter account",Ticket_Require_game:"Choose a game",Ticket_Require_server:"Choose a server",Ticket_Require_Email:"Enter your email",Ticket_Invalid_Email:"Please enter a valid email address.",Ticket_Require_category:"Please choose a category",Ticket_Require_classification:"Please choose a type",Ticket_Require_Subject:"Enter your subject",Ticket_Require_Message:"Enter your message",Ticket_Require_Captcha:"Enter verification code",Store_Select_Game:"Choose a game",Store_Select_Server:"Choose a server:",Store_Select_Product:"Please choose a product",Submitting:"Submitting...",Alert_Select_Server:"Choose a server:",Store_Pay_Poll:"Was payment successful?",Ticket_Require_Payment_Method:"Please choose a payment method.",Ticket_Require_Purchas_Date:"Please enter payment date.",Ticket_Require_Transaction_Id:"Please enter the order number.",Ticket_Require_Product:"Choose a product",Ticket_Require_File:"Please upload a screen shot.",Ui_Cancel_Btn:"Cancel",Ui_Confirm_Btn:"Confirm",Order_Cancel_Poll:"Are you sure you want to cancel your order?",Ui_Btn_Next:"Next",Ui_Btn_Choose_Payment:"Please choose a payment method.",Tip_Empty_Role:"Please create a character first.",Ui_Btn_SendAgain:"Send again",Ui_Tip_RequirePwd:"Enter your message.",Ui_Tip_RequireNewMail:"Enter new email.",Ui_Tip_MailError:"Email format is incorrect.",Ui_Tip_RequireReply:"Please answer this question.",Ui_Tip_SetQsSuccess:"Security questions successfully configured!",Ui_Tip_ModifyQsSuccess:"Security answer changed!",Ui_Tip_SelectSq:"Please select a security question.",Ui_Tip_DontRepeatSq:"Please don’t choose the same questions.",Ui_Tip_RequireAns:"Write the answer here",Ui_Tip_Uploading:"Uploading...",Ui_Txt_MailSent_Mail:"An email has been sent to%s, please follow the link in the email to continue.",Ui_Tip_NoPlayedRecord:"Please enter the game again and create a character.",Ui_Btn_PlayNow:"Play now!",Ui_Txt_SafeLevelLow:"Low",Ui_Txt_SafeLevelMid:"Medium",Ui_Txt_SafeLevelHigh:"High",Ui_Tip_SelectServer:"Choose a server:",Ui_Tip_OpenPlatLog:"You last logged in on %s",Ui_Tip_GetCharacterFaild:"Couldn't find character info",Ui_Tip_ClosePay:"Recharge not available yet",Ui_Btn_GetPackage:"Collect",Ui_Btn_CodeGot:"Collected",Ui_Tip_ASummary:"Summary",Ui_Tip_APanel:"Panel",Ui_Type_Package:"Gift Packs",Ui_Type_Privilege:"Perk",Ui_Type_Medal:"Badge",Ui_Tit_SpWelcom:"Welcome:",Ui_Btn_Close:"Close",Input_Server_Num:"Input your server number",Ui_Btn_Login:"Login",Ui_Btn_CodeRedmption:"Code Redemption",Ui_txt_Offline:"Offline",Ui_txt_Online:"Online",Ui_txt_Beta:"Beta",Ui_txt_MyServers:"My Servers:",Ui_txt_RecommendedServers:"Recommended Servers:",Ui_txt_Chooseanotherserver:"Choose another server:",Ui_txt_AllServers:"All Servers:",Ui_Btn_Packup:"Hide"}},{}],20:[function(e,t){var i=location.host.split("."),s="en";/^fr/i.test(i[0])?s="fr":/^de/i.test(i[0])?s="de":/^tr/i.test(i[0])?s="tr":/^es/i.test(i[0])?s="es":/^br/i.test(i[0])?s="br":/^ru/i.test(i[0])?s="ru":"drachen"==i[0]?s="de":"odyssea"==i[0]?s="de":"de"==i[1]&&(s="de"),t.exports=s},{}],21:[function(e,t,i){i.cookie=function(e,t,i,s,n,r){function o(e,t,i,s,n,r){var o=new Date;o.setTime(o.getTime()+1e3*i),document.cookie=e+"="+encodeURI(t)+(i?"; expires="+o.toGMTString():"")+(s?"; path="+s:"")+(n?"; domain="+n:"")+(r?"; secure":"")}function a(e){if(!document.cookie)return"";var t="",i=document.cookie.split(";");for(var s in i){var n=$.trim(i[s]).split("=");if(n[0]==e){t=n[1];try{t=decodeURIComponent(t)}catch(r){}break}}return t}return void 0==t?a(e):void o(e,t,i,s,n,r)}},{}],22:[function(e,t){t.exports=function(t){var i=e("../global"),s=function(){var e=(new Date).getTime()+"-",t=0;return function(){return e+t++}}(),n=function(e){window.r2Logger||(window.r2Logger={});var t=new Image,i=s();window.r2Logger[i]=t,t.onload=t.onerror=function(){t.onload=t.onerror=null,t=null,delete window.r2Logger[i]},t.src=e+"&_uid="+i},r=function(e){if(!e)return"";var t=new RegExp("(^|; ?)"+e+"=(.*?)(;|$)"),i=t.exec(document.cookie);return i?i[2]:""},o="userid="+r("r2_uid")+"&cid="+r("fromdetail")+"&adid="+r("fromadid")+"&requrl="+encodeURIComponent(location.href.replace(/(\w+?:\/\/([\.\w-]+?))\//,"/"))+"&query_string="+encodeURIComponent(location.search.replace("?",""))+"&http_referer="+encodeURIComponent(document.referrer)+"&domain="+location.host+"&siteid="+i.PLATFORM,t=t||i.LOG_URL;n(t+(-1===t.indexOf("?")?"?":"&")+o)}},{"../global":17}],23:[function(e,t){t.exports={get_host:function(e){return-1==e.indexOf("http://")?location.host:e.replace("http://","").split("/")[0]},parse_str:function(e,t,i,s,n,r){if("string"!=typeof e)return{};var o,a,l={};e=e.split(t||";"),i||(i=":");for(var h in e)if($.trim(e[h]))if(e[h]=e[h].split(i),o="function"==typeof r?r(e[h][0]):e[h][0],a="function"==typeof n?n(e[h][1]):e[h][1],o in l)switch(s){case"first":continue;case"last":l[o]=a;break;default:"object"==typeof l[o]?l[o].push(a):l[o]=[l[o],a]}else l[o]=a;return l},search:function(e){if(void 0===t)var t=this.parse_str(location.search.substr(1),"&","=","all",decodeURIComponent,decodeURIComponent);return void 0===e?t:"undefined"==typeof t[e]?"":t[e]}}},{}],24:[function(e,t,i){var s,n,r=e("../ui/simpleDialog"),o=e("../lang"),a={success:"i-ok",warn:"i-warning",error:"i-error",noicon:""},l='<div id="easyDialogWrapper" class="easyDialog_wrapper" style="display: block; margin: 0px;">							<div class="easyDialog_content">								<h4 class="easyDialog_title" id="easyDialogTitle" style="cursor: move;">									<a href="javascript:void(0)" class="close_btn" id="closeBtn">×</a>									Message								</h4>								<div class="easyDialog_text"></div>							</div>						</div>',h='<div id="easyDialogWrapper" class="easyDialog_wrapper" style="display: block; margin: 0px;">							<div class="easyDialog_content">								<h4 class="easyDialog_title" id="easyDialogTitle" style="cursor: move;">									<a href="javascript:void(0)" class="close_btn" id="closeBtn">×</a>									Confirm								</h4>								<div class="easyDialog_text"></div>								<div class="easyDialog_footer">									<button class="btn_normal" id="easyDialogNoBtn">'+o.L("Ui_Cancel_Btn")+'</button>									<button class="btn_highlight" id="easyDialogYesBtn">'+o.L("Ui_Confirm_Btn")+"</button>								</div>							</div>						</div>";i.alert=function(e,t,i,n,o){if(!s){var h=$(l).appendTo("body");s=new r.Dialog({dialog:h,title:h.find(".easyDialog_title"),closeBtn:h.find(".close_btn")})}if(t){var c=s.$title.show()[0],d=c.lastChild;d&&3===d.nodeType&&c.removeChild(d),c.appendChild(document.createTextNode(t))}else s.$title.hide();return s.$dialog.find(".easyDialog_text").html(("noicon"===i?"":'<i class="i-tip '+(i&&i in a?a[i]:"i-error")+'"></i>')+""+e),s.show(),n&&setTimeout(function(){s.hide()},n),"function"==typeof o&&s.once("hide",o),s},i.confirm=function(e,t,i,s,o){if(i=i||function(){},s=s||function(){},!n){var l=$(h).appendTo("body");n=new r.Dialog({dialog:l,title:l.find(".easyDialog_title"),closeBtn:l.find(".close_btn")})}if(t){var c=n.$title.show()[0];c.removeChild(c.lastChild),c.appendChild(document.createTextNode(t))}else n.$title.hide();return n.$dialog.find("#easyDialogNoBtn,#closeBtn").one("click",function(){s(),n.hide()}),n.$dialog.find("#easyDialogYesBtn").one("click",function(){i(),n.hide()}),n.$dialog.find(".easyDialog_text").html(("noicon"===o?"":'<i class="i-tip '+(o&&o in a?a[o]:"i-error")+'"></i>')+"&nbsp;"+e),n.show(),confirm};var c={};i.easyDialog={open:function(e){c[e.container]?c[e.container].show():(c[e.container]=new r.Dialog({dialog:$("#"+e.container),closeBtn:$("#"+e.container).find(".close_btn,.close,.cancel"),withScroll:e.withScroll,width:e.width,posType:e.posType}),c[e.container].show())},close:function(){$.each(r.dialogs,function(){this.hide()})}},i.dialogs=c},{"../lang":18,"../ui/simpleDialog":48}],25:[function(e,t,i){i=t.exports=function(){return new i.EventEmitter},i.EventEmitter=function(){this._events=this._events||null},i.EventEmitter.prototype={emit:function(){var e=arguments[0];if("error"===e&&(!this._events||!this._events.error||this._events.error instanceof Array&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:for(var i=arguments.length,s=new Array(i-1),n=1;i>n;n++)s[n-1]=arguments[n];t.apply(this,s)}return!0}if(t instanceof Array){for(var i=arguments.length,s=new Array(i-1),n=1;i>n;n++)s[n-1]=arguments[n];for(var r=t.slice(),n=0,i=r.length;i>n;n++)r[n].apply(this,s);return!0}return!1},on:function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",e,"function"==typeof t.listener?t.listener:t),this._events[e]?this._events[e]instanceof Array?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,this},once:function(e,t){function i(){s.removeListener(e,i),t.apply(this,arguments)}if("function"!=typeof t)throw new Error(".once only takes instances of Function");var s=this;return i.listener=t,s.on(e,i),this},removeListener:function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var i=this._events[e];if(i instanceof Array){for(var s=-1,n=0,r=i.length;r>n;n++)if(i[n]===t||i[n].listener&&i[n].listener===t){s=n;break}if(0>s)return this;i.splice(s,1),0==i.length&&delete this._events[e]}else(i===t||i.listener&&i.listener===t)&&delete this._events[e];return this},removeAllListeners:function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},listeners:function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e]instanceof Array||(this._events[e]=[this._events[e]]),this._events[e]}},i._name="undefined"==typeof events?"events":"events_module"},{}],26:[function(e,t){function i(e){this.frame=e||!1,this._events=this._events||{};var t=this;this.frame?(window.frame_interface=window.frame_interface||{},n++,window.frame_interface[n]=function(e,i){t.doEvent(e,i)},this.interface_id=n):(this.interface_id=s.search("frame_interface_id"),window.frame_interface=function(e,i){t.doEvent(e,i)})}/\.r2games\.com$/.test(location.hostname)&&(document.domain=e("../global").DOMAIN);var s=e("./URL"),n=0;t.exports=i,i.prototype.get_interface_id=function(){return this.interface_id},i.prototype.subscription=function(e,t){"function"==typeof t&&(this._events[e]=t)},i.prototype.publish=function(e){for(var t=arguments.length,i=new Array(t-1),s=1;t>s;s++)i[s-1]=arguments[s];if(this.frame){var n=this._get_frame_window();n.frame_interface(e,i)}else this.interface_id>0&&parent.frame_interface[this.interface_id](e,i)},i.prototype.doEvent=function(e,t){"function"==typeof this._events[e]&&this._events[e].apply(this,t)},i.prototype._get_frame_window=function(){return this.frame?this.frame[0].contentWindow:!1}},{"../global":17,"./URL":23}],27:[function(e,t){var i,s=e("../user/auth"),n=e("../global"),r=/(^|;)\s*?r2ot\s*?=\s*?(.*?)\s*?(;|$)/,o=!1,a=function(){var e=(new Date).getTime()+"-",t=0;return function(){return e+t++}}(),l={start:function(){i=(new Date).getTime(),document.cookie="r2ot=1|"+i+";path=/;domain=.r2games.com;",o=!0,l.send(),setTimeout(arguments.callee,6e5)},check:function(){if(!o){if(s.is_login()){var e=r.exec(document.cookie),t=e&&e[2].split("|");(!e||!+t[0]||(new Date).getTime()-+t[1]>6e5)&&l.start()}setTimeout(arguments.callee,3e3)}},send:function(){window.r2Logger||(window.r2Logger={});var e=new Image,t=a();window.r2Logger[t]=e,e.onload=e.onerror=function(){e.onload=e.onerror=null,e=null,delete window.r2Logger[t]},$.getJSON(n.BASE_URL+"/user/?ac=onlineHeartbeat&_="+((new Date).getTime()+1e6*Math.random()),function(e){1==e.data.killstatus&&(window.location.href="http://www.r2games.com")})}};window.onbeforeunload=function(){o&&(document.cookie="r2ot=0|"+r.exec(document.cookie)[2].split("|").pop()+";path=/;domain=r2games.com;")},l.check(),t.exports=l},{"../global":17,"../user/auth":53}],28:[function(e,t){function i(e,t,i){for(var s="var r = [];",n=e.split(t),r=0;r<n.length;r++){var o=n[r].split(i);void 0!==o[1]?(/(^( )?(var |if|for|else|switch|case|break|{|}))(.*)?/.test(o[0])||(o[0]="r.push("+o[0]+");"),o[1]="r.push('"+o[1]+"');"):o[0]="r.push('"+o[0]+"');",n[r]=o.join("")}return s+=n.join("").replace(/\n/g,"\\\n")+"return r.join('');"}function s(e,t,s,n){var r=new Function(i(e.replace(/\n|\r|\t/g,""),s||"<%",n||"%>"));return r.apply(t)}t.exports=s},{}],29:[function(e,t){var i=function(e,t){this.state="pending",e instanceof Function&&(this.onFulfilled=e),t instanceof Function&&(this.onRejected=t)};i.prototype.then=function(e,t){return this.nextPromise=new i,"fulfilled"===this.state?e instanceof Function&&e():"rejected"===this.state?t instanceof Function&&t():(e instanceof Function&&(this.nextPromise.onFulfilled=e),t instanceof Function&&(this.nextPromise.onRejected=t)),this.nextPromise},i.prototype.run=function(e){function t(){n.resolve()}function s(e){n.reject(e)}var n=this;onFulfilled=this.onFulfilled,this.value=onFulfilled(t,s,e),i.prototype.current=this},i.prototype.stop=function(e){var t=this.onRejected;t(e)},i.prototype.resolve=function(){this.state="fulfilled",this.nextPromise&&this.nextPromise.run(this.value)},i.prototype.reject=function(e){this.state="rejected",this.stop(e)},t.exports=i},{}],30:[function(e,t){t.exports=function(e,t){function i(){return function(e,i){var s=e[t],n=i[t];return isNaN(+s)||isNaN(n)||(s=+s,n=+n),n>s?-1:s>n?1:0}}if(e){if(!t)return e;var s=[];if(e instanceof Array)s=e;else for(var n in e)s.push(e[n]);return s.sort(i())}}},{}],31:[function(e,t){t.exports={blank:e("./slider.effects/blank"),fade:e("./slider.effects/fade"),platFade:e("./slider.effects/platFade"),singleSwitch:e("./slider.effects/singleSwitch"),normalSwitch:e("./slider.effects/normalSwitch"),indexSwitch:e("./slider.effects/indexSwitch"),accordion:e("./slider.effects/accordion"),classSwitch:e("./slider.effects/classSwitch"),totalSwitch:e("./slider.effects/totalSwitch")}
},{"./slider.effects/accordion":32,"./slider.effects/blank":33,"./slider.effects/classSwitch":34,"./slider.effects/fade":35,"./slider.effects/indexSwitch":36,"./slider.effects/normalSwitch":37,"./slider.effects/platFade":38,"./slider.effects/singleSwitch":39,"./slider.effects/totalSwitch":40}],32:[function(e,t){t.exports={init:function(){this.core.$container.height(this.core.$container.height())},play:function(e){var t=(this.core.$container,this.core.$eles),i=t.eq(this.core.index),s=t.eq(e);i.slideUp("fast"),s.slideDown("fast"),this.end()}}},{}],33:[function(e,t){t.exports={init:function(){var e=this.core.$eles;e.filter(":gt(0)").hide()},play:function(e){var t=(this.core.$container,this.core.$eles),i=(t.eq(this.core.index),t.eq(e));t.hide(),i.show(),this.end()}}},{}],34:[function(e,t){t.exports={play:function(e){var t=(this.core.$container,this.core.$eles),i=t.eq(this.core.index),s=t.eq(e);switchClass=this.core.options.switchClass,i.removeClass(switchClass),s.addClass(switchClass),this.end()}}},{}],35:[function(e,t){t.exports={init:function(){{var e=this.core.$eles;this.core.$container}e.css({position:"absolute",left:0,top:0}).hide().eq(0).show()},play:function(e){var t=(this.core.$container,this.core.$eles),i=t.eq(this.core.index),s=t.eq(e),n=this;i.fadeOut(this.duration),s.fadeIn(this.duration,function(){n.end()})}}},{}],36:[function(e,t){e("../../user/auth");var i;t.exports={init:function(){var e=this.core.$eles,t=this.core.$container;$(window).on("resize",function(){$(this).width(),$(this).height();t.css({margin:"0 auto",width:t.find("img:visible").width(),height:t.find("img:visible").height()-1}),i=t.width()}).trigger("resize"),e.show().css({position:"absolute",top:0,left:0,width:"100%"}).filter(":gt(0)").hide(),e.eq(0).find("img").clone().css({visibility:"hidden",display:"block"}).appendTo(t)},play:function(e){var t=this,s=Math.abs(e-this.core.index),n=e-this.core.index/s,r=(this.core.$container,this.core.$eles),o=r.eq(this.core.index),a=r.eq(e);n>0||this.core.index===this.core.length-1&&0===e&&!this.core.userAction?(a.show().css({left:i}),a.animate({left:0},this.duration,function(){t.end()}),o.animate({left:-i},this.duration,function(){$(this).hide()})):(a.show().css({left:-i}),a.animate({left:0},this.duration,function(){t.end()}),o.animate({left:i},this.duration,function(){$(this).hide()}))}}},{"../../user/auth":53}],37:[function(e,t){e("../../user/auth");var i;t.exports={init:function(){var e=this.core.$eles,t=this.core.$container;$(window).on("resize",function(){{var s,n=$(this).width();$(this).height()}s=n>=1920?1903:n>=1e3?$(document).width():1e3,t.css({margin:"0 auto",width:s}),e.css({width:s}),i=s}).trigger("resize"),e.eq(0).find("p img").clone().css({visibility:"hidden",display:"block"}).appendTo(t),t.css({overflow:"hidden",position:"relative"}),e.show().css({position:"absolute",top:0,left:0}).filter(":gt(0)").hide()},play:function(e){var t=this,s=Math.abs(e-this.core.index),n=e-this.core.index/s,r=(this.core.$container,this.core.$eles),o=r.eq(this.core.index),a=r.eq(e);n>0||this.core.index===this.core.length-1&&0===e&&!this.core.userAction?(a.show().css({left:i}),a.animate({left:0},this.duration,function(){t.end()}),o.animate({left:-i},this.duration,function(){$(this).hide()})):(a.show().css({left:-i}),a.animate({left:0},this.duration,function(){t.end()}),o.animate({left:i},this.duration,function(){$(this).hide()}))}}},{"../../user/auth":53}],38:[function(e,t){t.exports={init:function(){{var e=this.core.$eles,t=this.core.$container;e.eq(0).find("img").clone().css({visibility:"hidden",display:"block"}).appendTo(t)}e.css({position:"absolute",left:0,top:0,width:"100%"}).hide().eq(0).show()},play:function(e){var t=(this.core.$container,this.core.$eles),i=t.eq(this.core.index),s=t.eq(e),n=this;i.fadeOut(this.duration),s.fadeIn(this.duration,function(){n.end()})}}},{}],39:[function(e,t){t.exports={init:function(){{var e=this.core.$eles;this.core.$container}e.show().css({position:"absolute",top:0,left:0,width:"100%"}).hide().eq(0).show()},play:function(e){var t=this,i=(this.core.$container,this.core.$eles),s=i.eq(this.core.index),n=i.eq(e),r=Math.abs(e-this.core.index),o=(r===i.length-1?-1:1)*(e-this.core.index/r);o>0?(n.css({left:"100%"}),n.show().animate({left:0},this.duration,function(){t.end()}),s.animate({left:"-100%"},this.duration)):(n.css({left:"-100%"}),n.show().animate({left:0},this.duration,function(){t.end()}),s.animate({left:"100%"},this.duration))}}},{}],40:[function(e,t){function i(e,t,i){return $(e).css(t).replace(i,"")}function s(e){return $(e).width()+ +i(e,"border-left-width","px")+ +i(e,"border-right-width","px")+ +i(e,"margin-left","px")+ +i(e,"margin-right","px")}t.exports={init:function(){var e=this.core.$eles,t=this.core.$container,i=0;e.each(function(){i+=s(this)}),t.css({width:i}),e.show()},play:function(e){var t=this,i=this.core.$container,n=this.core.$eles,r=n.eq(this.core.index),o=n.eq(e),a=s(r),l=Math.abs(e-this.core.index),h=(l===n.length-1?-1:1)*(e-this.core.index/l);h>0&&i.animate({"margin-left":-a},function(){r.appendTo(i),i.css({"margin-left":0}),t.end()}),0>=h&&i.css({"margin-left":-a}).prepend(o).animate({"margin-left":0},function(){t.end()})}}},{}],41:[function(e,t,i){function s(e){this.init(e),this.auto&&this.waitForNext()}function n(e){this.init(e)}var r=e("../plugins/events");s.prototype=$.extend(r(),{init:function(e){this.initElements(e),this.bindEvents()},initElements:function(e){this.$container=$(e.container),this.$eles=$(e.eles),this.$navItems=$(e.nav),this.$prevBtn=$(e.prevBtn),this.$nextBtn=$(e.nextBtn),this.index=e.index||0,this.length=this.$eles.length,this.navEvent=e.navEvent||"click",this.activeNavCls=e.activeNavCls||"",this.auto="auto"in e?e.auto:5e3,this.animator=new n({effect:e.effect,duration:e.duration,core:this}),this.userAction=!1,this.options=e},bindEvents:function(){var e=this;this.animator.on("animationEnd",function(){e.auto&&e.waitForNext(),e.userAction=!1,e.emit("animationEnd")}),this.on("toIndex",function(t){e.animator.animate(t),e.index=t,this.$navItems&&this.$navItems.removeClass(e.activeNavCls).eq(e.index).addClass(e.activeNavCls)}),this.$navItems.length&&this.$navItems.on(this.navEvent,function(){e.userAction=!0,e.toIndex(e.$navItems.index(this))}),this.$prevBtn.on("click",function(){return e.toPrev(),$(this).is('a[href^="javascript:"]')?!1:void 0}),this.$nextBtn.on("click",function(){return e.toNext(),$(this).is('a[href^="javascript:"]')?!1:void 0})},toPrev:function(){this.toIndex(this.index-1),this.emit("toPrev")},toNext:function(){this.toIndex(this.index+1),this.emit("toNext")},toIndex:function(e){this.isAnimating||(e=(e+this.length)%this.length,e!==this.index&&this.emit("toIndex",e))},waitForNext:function(){var e=this;this.pause(),this.autoTimer=setTimeout(function(){e.toNext()},this.auto)},pause:function(){this.autoTimer&&(clearTimeout(this.autoTimer),this.autoTimer=null)}}),n.prototype=$.extend(r(),{init:function(e){this.core=e.core,this.effect=e.effect||"blank",this.duration=e.duration||500,this.effectFn=this.effectRouter[this.effect],this.effectFn&&this.effectFn.init&&this.effectFn.init.call(this)},animate:function(e){this.effectFn&&(this.core.isAnimating=!0,this.effectFn.play.call(this,e))},end:function(){this.core.isAnimating=!1,this.emit("animationEnd")},effectRouter:e("../plugins/slider.effects")}),$.fn.slidesjs=function(e){var t=this.data("slider");return t&&t instanceof s?t:(this.data("slider",new s($.extend({container:this.get(0),eles:this.children()},e||{}))),this)},i.Slide=s},{"../plugins/events":25,"../plugins/slider.effects":31}],42:[function(e,t,i){function s(e){this.init(e)}function n(e){var t=e.ref,i=t.data("tip");i?i.update(e):(i=new s(e),t.data("tip",i)),i.show()}function r(e){var t=$(e).data("tip");t&&t.hide()}var o=e("../plugins/events"),a=e("../plugins/parseTpl");s.prototype=$.extend(o(),{init:function(e){this.initElements(e),this.bindEvents(),this.importCss()},initElements:function(e){this.msgTpl=e.msgTpl||'<div class="global-tips global-tips-<% this.type %>"><p><% this.msg %></p><i class="i-arrow"></i></div>',this.type=e.type||"error",this.lifeTime=e.lifeTime,this.css=e.css||"http://r2cdn2.r2games.com/en/www/css/pack/tips.css",this.msg=e.msg||"",this.$ref=$(e.ref||"<div></div>"),this.refOffset={},this.outEffect=e.outEffect||"",this.$msg=$(a(this.msgTpl,{msg:this.msg,type:this.type}))},bindEvents:function(){var e,t=this;this.on("show",function(){this.lifeTime&&(e&&(clearTimeout(e),e=null),e=setTimeout(function(){t.hide(t.outEffect)},this.lifeTime))}),$(window).on("resize",function(){t.refOffset=t.$ref.offset()}).trigger("resize")},show:function(){this.setPos(),this.$msg.appendTo("body"),this.emit("show")},hide:function(e){var t=this;e&&this.$msg[e]?this.$msg[e](function(){t.$msg.remove()}):this.$msg.remove(),this.emit("hide")},update:function(e){this.type=e.type||"error",this.$msg.remove(),this.$msg=$(a(this.msgTpl,{msg:e.msg||"",type:this.type})),e.lifeTime&&(this.lifeTime=e.lifeTime),this.emit("update")},setPos:function(){this.$msg&&(this.refOffset=this.$ref.offset(),this.$msg.css({position:"absolute",left:this.refOffset.left,top:this.refOffset.top+this.$ref.outerHeight()+4}))},importCss:function(){$('link[href="'+this.css+'"]').length||$('<link rel="stylesheet" href="'+this.css+'" />').appendTo("head")}}),i.Tip=s,i.show=n,i.hide=r},{"../plugins/events":25,"../plugins/parseTpl":28}],43:[function(e,t,i){function s(e){this.init(e)}{var n=e("../plugins/events");e("../ui/simpleDialog").Dialog}s.prototype=$.extend(n(),{init:function(e){this.initElements(e),this.bindEvents(),this.toSrc(+e.index||0)},initElements:function(e){e=e||{},this.srcs=e.srcs||[],this.animateType=e.animateType||"fadeIn",this.$wrapper=$(e.wrapper),this.$caption=$(e.caption||this.$wrapper.find(".lb-caption")),this.$number=$(e.number||this.$wrapper.find(".lb-number")),this.$srcEle=$(e.srcEle||this.$wrapper.find(".lb-image")),this.$loading=$(e.loading||this.$wrapper.find(".lb-loader")),this.$prevBtn=$(e.prevBtn||this.$wrapper.find(".lb-prev")),this.$nextBtn=$(e.nextBtn||this.$wrapper.find(".lb-next")),this.$navItems=$(e.navItems||"<div></div>"),this.maxWidth=e.maxWidth,this.maxHeight=e.maxHeight,this.staticWidth=e.staticWidth,this.staticHeight=e.staticHeight,this.$srcEle.is("img")&&(this.preLoadImg=new Image),this.currentNavCls=e.currentNavCls||"",this.index},bindEvents:function(){var e=this;this.$prevBtn.on("click",function(){e.toSrc((e.index-1+e.srcs.length)%e.srcs.length)}),this.$nextBtn.on("click",function(){e.toSrc((e.index+1)%e.srcs.length)}),this.preLoadImg?this.preLoadImg.onload=function(){e.$srcEle.attr("src",this.src),e.emit("load"),e.$srcEle[e.animateType||"show"](),e.finish()}:this.$srcEle.on("load",function(){e.emit("load"),e.$srcEle[e.animateType||"show"](),e.finish()}),this.$srcEle.on("error",function(){e.emit("loadError"),e.finish()}),this.$navItems.on("click",function(){e.toSrc(e.$navItems.index(this)),e.emit("navTo")}),this.on("loading",function(){e.$currentNavItem=e.$navItems.removeClass(e.currentNavCls).eq(e.index).addClass(e.currentNavCls)})},loading:function(){this.$srcEle.hide(),this.$loading.show(),this.emit("loading")},finish:function(){this.$loading.hide(),this.emit("finish")},toSrc:function(e){e!==this.index&&(this.preLoadImg?this.preLoadImg.src=this.srcs[e]:this.$srcEle.attr("src",this.srcs[e]),this.index=e,this.loading())}}),i.Gallery=s},{"../plugins/events":25,"../ui/simpleDialog":48}],44:[function(e,t,i){function s(e){this.init(e)}var n=e("../global"),r=e("../plugins/events"),o=e("../plugins/parseTpl"),a={en:{h1:"Browser Games",h2:"iOS Games",h3:"Android Games"},fr:{h1:"Navigateur",h2:"iOS",h3:"Android"},de:{h1:"Browser",h2:"iOS",h3:"Android"},tr:{h1:"Navegador",h2:"iOS",h3:"Android"},br:{h1:"Navegador",h2:"iOS",h3:"Android"},es:{h1:"Navegador",h2:"iOS",h3:"Android"},ru:{h1:"Браузерные игры",h2:"Игры для iOS",h3:"Игры для Android"}},l=location.host.split("."),h="en";/^fr/i.test(l[0])?h="fr":/^de/i.test(l[0])?h="de":/^tr/i.test(l[0])?h="tr":/^es/i.test(l[0])?h="es":/^br/i.test(l[0])?h="br":/^ru/i.test(l[0])?h="ru":"drachen"==l[0]?h="de":"odyssea"==l[0]?h="de":"de"==l[1]&&(h="de");var c={};"undefined"==typeof a[h]&&(a[h]=a.en),c=a[h];var d=location.host.split(".").shift(),u={www:1,fr:1,de:1,ar:1,tr:1,es:1,br:1,ru:1},p="R2_"+(d in u?"PLATFORM":d.substr(0,1).toUpperCase()+d.substr(1))+"_"+h.toUpperCase(),f='<div id="games-subMenu" style="display: none;">	<div class="pc-games">		<h3>'+c.h1+'</h3>		<div class="menu-list">		<% for(var i in this.pc){ %>			<p><a href="<% this.pc[i].url %>" target="_blank"><% this.pc[i].name %></a></p>		<% } %>		</div>	</div>	<div class="IOS-games">		<h3>'+c.h2+'</h3>		<div class="menu-list">		<% for(var i in this.ios){ %>			<p><a href="<% this.ios[i].ios_url %>?campaign='+p+'" target="_blank"><% this.ios[i].name %></a></p>		<% } %>		</div>	</div>	<div class="adroid-games">		<h3>'+c.h3+'</h3>		<div class="menu-list">		<% for(var i in this.android){ %>			<p><a href="<% this.android[i].android_url %>?campaign='+p+'" target="_blank"><% this.android[i].name %></a></p>		<% } %>		</div>	</div></div>';s.prototype=$.extend(r(),{init:function(e){this.initElements(e),this.getPcGames(),this.getMobileGames()},initElements:function(e){this.$pickBtn=$(e.pickBtn),this.$ref=$(e.ref),this.css=e.css,this.tpl=e.tpl||f,this.pickEvent=e.pickEvent||"mouseover",this.showType=e.showType||"fadeIn",this.hideType=e.hideType||"fadeOut",this.offsetLeft=+e.offsetLeft||0,this.offsetTop=+e.offsetTop||0,this.$gamePicker,this.pcGames,this.mobileGames},bindEvents:function(){var e=this;this.$pickBtn.on(this.pickEvent,function(t){e.show(),"click"===t.type&&t.stopPropagation()}),this.$gamePicker.on("mouseleave",function(){e.hide()}),$("html, body").on("click",function(){e.hide()}),$(window).on("resize",function(){e.setPos()})},getPcGames:function(){var e=this;$.getJSON(n.GAMES_API+"&jsoncallback=?",function(t){e.pcGames=t,e.emit("pcReady"),e.mobileGames&&e.create()})},getMobileGames:function(){var e=this;$.getJSON(n.GAMES_API+"&mobile=1&jsoncallback=?",function(t){e.mobileGames={ios:{},android:{}},e.emit("mobileReady"),$.each(t,function(){this.ios_url&&(e.mobileGames.ios[this.id]=this),this.android_url&&(e.mobileGames.android[this.id]=this)}),e.pcGames&&e.create()})},create:function(){this.css&&(document.createStyleSheet?document.createStyleSheet(this.css):$('<link rel="stylesheet" href="'+this.css+'" />').appendTo("head")),this.$gamePicker=$(o(this.tpl,{pc:this.pcGames,ios:this.mobileGames.ios,android:this.mobileGames.android})),this.setPos(),this.$gamePicker.appendTo("body"),this.bindEvents(),this.emit("create")},setPos:function(){var e=this.$ref.offset();this.$gamePicker.css({position:"fixed",left:e.left+(this.offsetLeft||0),top:this.$ref.height()})},show:function(){this.$gamePicker[this.showType](),this.emit("show")},hide:function(){this.$gamePicker[this.hideType](),this.emit("hide")}}),$.fn.gamePicker=function(e){var t=new s($.extend({pickBtn:this,ref:this,css:"//r2cdn2.r2games.com/en/www/css/pack/game_picker.css",showType:"show",hideType:"hide"},e));return this.data("game_picker",t),this},i.GamePicker=s,i._name="GamePicker"},{"../global":17,"../plugins/events":25,"../plugins/parseTpl":28}],45:[function(e,t,i){function s(e){this.init(e)}var n=e("../plugins/events"),r=e("../plugins/parseTpl");s.prototype=$.extend(n(),{init:function(e){this.initElements(e),this.bindEvents(),this.toPage(this.currentPage)},initElements:function(e){this.$items=e.items&&$(e.items),this.totalItemNum=this.$items?this.$items.length:e.totalItemNum||0,this.$pagesContainer=$(e.pagesContainer),this.$prev=$(e.prev||e.prevBtn),this.$next=$(e.next||e.nextBtn),this.$prevEllipsis=$(e.prevEllipsis),this.$nextEllipsis=$(e.nextEllipsis),this.$input=$(e.input),this.$fastBtn=$(e.faseBtn),this.perPage=e.perPage||1,this.visiblePage=e.visiblePage||5,this.currentCls=e.currentCls||"",this.pageItemTpl=e.pageItemTpl||'<a href="javascript:;"<% if(this.current === this.pageNum){ %> class="'+this.currentCls+'"<% } %>><% this.pageNum %></a>',this.currentPage=e.currentPage||1,this.maxPageNum=Math.ceil(this.totalItemNum/this.perPage)},bindEvents:function(){var e=this;this.$prev.on("click",function(){1!==e.currentPage&&e.toPage(e.currentPage-1)}),this.$next.on("click",function(){e.currentPage!==e.maxPageNum&&e.toPage(e.currentPage+1)}),this.$input.on("keydown",function(t){if(13===t.keyCode){var i=+$.trim(this.value);isNaN(i)||e.toPage(Math.min(Math.max(1,i),e.maxPageNum))}}),this.$fastBtn.on("click",function(){var t=+$.trim(e.$input.val());isNaN(t)||e.toPage(Math.min(Math.max(1,t),e.maxPageNum))}),this.$pagesContainer.on("click",/<(.*?)( |>)/.exec(this.pageItemTpl)[1],function(){e.toPage(+$(this).text())}),this.on("toPage",function(){this.$items&&(this.$items.hide(),1===this.currentPage?this.$items.filter(":lt("+this.perPage+")").show():this.$items.filter(":gt("+((this.currentPage-1)*this.perPage-1)+")").filter(":lt("+this.perPage+")").show()),this.range.left>1?this.$prevEllipsis.show():this.$prevEllipsis.hide(),this.range.right<this.maxPageNum?this.$nextEllipsis.show():this.$nextEllipsis.hide()})},toPage:function(e){this.currentPage=e,this.updatePageItems(),this.emit("toPage",e)},updatePageItems:function(){this.$pagesContainer.empty(),this.getRange();for(var e=this.range.left,t="";e<=this.range.right;e++)t+=r(this.pageItemTpl,{pageNum:e,current:this.currentPage});this.$pagesContainer.html(t),this.emit("updatePageItems")},getRange:function(){var e=Math.ceil((this.visiblePage-1)/2),t=Math.floor((this.visiblePage-1)/2),i={left:this.currentPage-e,right:this.currentPage+t};i.left<=1?(i.left=1,i.right=Math.min(this.visiblePage,this.maxPageNum)):i.right>=this.maxPageNum&&(i.right=this.maxPageNum,i.left=Math.max(this.maxPageNum-this.visiblePage+1,1)),this.range=i},update:function(e){this.pages=null,this.perPage=e.perPage||this.perPage,this.totalItemNum=e.totalItemNum,this.maxPageNum=Math.ceil(this.totalItemNum/this.perPage),this.currentPage=e.currentPage,this.toPage(this.currentPage)}}),i.Paging=s},{"../plugins/events":25,"../plugins/parseTpl":28}],46:[function(e,t){function i(e,t){e.length&&(this.pop_dom=e,this.settings=t?t:{},this.window_resize_timeout=0,s++,this.popups_z_index=s)}var s=1e4,n=!1;i.prototype.open=function(){this.pop_dom.show(),this._set_style(),this._reset_position(),n||(this._set_mask(),n=!0),this._window_resize()},i.prototype.close=function(){this._remove_mask(),this.pop_dom.hide(),n=!1},i.prototype._set_style=function(){"undefined"!=typeof this.settings.height&&this.pop_dom.height(this.settings.height),"undefined"!=typeof this.settings.width&&this.pop_dom.width(this.settings.width),this.pop_dom.css("z-index",this.popups_z_index),this.pop_dom.css("position","fixed"),this.pop_dom.css("_position","absolute")},i.prototype._reset_position=function(e){var t=this.pop_dom,i=($(window).width()-t.width())/2,s=($(window).height()-t.height())/2;e?t.animate({left:i,top:s},500):t.css({left:i,top:s})},i.prototype._window_resize=function(){var e=this;$(window).resize(function(){e.window_resize_timeout&&clearTimeout(e.window_resize_timeout),e.window_resize_timeout=setTimeout(function(){e._reset_position(!0),e._reset_mask(),e.window_resize_timeout=0},100)})},i.prototype._set_mask=function(){var e=$("body"),t='<div id="user_popups_mask" style="display: block; border: medium none; position: absolute; top: 0; left: 0; opacity: 0.5;filter: alpha(opacity=50); background: none repeat scroll 0 0 rgb(0, 0, 0); z-index: 9998;"></div>';e.append(t),this._reset_mask()},i.prototype._reset_mask=function(){$("#user_popups_mask").width($(document).width()).height($(document).height())},i.prototype._remove_mask=function(){$("#user_popups_mask").remove()},t.exports=i},{}],47:[function(e,t,i){function s(e){this.init(e)}var n=e("../global"),r=e("../plugins/events"),o=e("./sug"),a=e("../plugins/parseTpl"),l=e("../lang.js"),h=e("../plugins/resortByAttr"),c={serverItem:'<li class="server-status" title="<% this.servername %>"><a href="javascript:;"><i class="i-<% if(this.status === \'0\'){ %>offline<% } else if(this.status === \'1\'){ %>online<% } else if(this.status === \'2\'){ %>beta<% } %>"></i><b><% if(this.servernum){ %><% } %><% this.servername %></b></a></li>',tabItem:'<li<% if(this.counter === 0){ %> class="<% this.currentCls %>"<% } %>><a href="javascript:;"><% this.text %></a></li>',tabContent:'<ul class="server-list'+(-1===document.cookie.indexOf("in_client=1")?"":" client-server")+'"<% if(this.counter > 0){ %> style="display:none;"<% } %>></ul>',serverPicker:'<div class="popup-box cho-server-popup" id="server_picker" style="display:none;">				    	<div class="hd">							<i class="i-logo"></i>							<h3 class="tit"><b class="J-title">'+l.L("Ui_Tit_SpWelcom")+" "+(window.user_action&&window.user_action.get_name())+'</b></h3>							<a href="javascript:;" class="close" title="close">'+l.L("Ui_Btn_Close")+'</a>						</div>						<div class="bd">							<div class="server-no">								<label class="drop-input">									<input type="text" class="input-txt" value="'+l.L("Input_Server_Num")+'">									<a href="javascript:;" class="btn">'+l.L("Ui_Btn_Login")+'</a>									<div class="options" style="display:none;">										<ul></ul>									</div>								</label>								<a href="" class="btn-link J-codelink" style="display: none;">'+l.L("Ui_Btn_CodeRedmption")+'</a>								<p class="server-status">									<span><i class="i-offline"></i><em>'+l.L("Ui_txt_Offline")+'</em></span>									<span><i class="i-online"></i><em>'+l.L("Ui_txt_Online")+'</em></span>									<span><i class="i-beta"></i><em>'+l.L("Ui_txt_Beta")+'</em></span>								</p>							</div>							<div class="server-box" style="display:none;">								<h4 class="focal-tit">'+l.L("Ui_txt_MyServers")+'</h4>								<ul class="server-list J-lastplay"></ul>								<div class="dot-line"></div>							</div>							<div class="server-box">								<h4 class="focal-tit">'+l.L("Ui_txt_RecommendedServers")+'</h4>								<ul class="server-list J-recommended"></ul>								<a href="javascript:;" class="btn-more J-showmore"><i class="i-triangle-down"></i><span>'+l.L("Ui_txt_Chooseanotherserver")+'</span></a>								<a href="javascript:;" class="btn-more J-hidemore" style="display:none;"><i class="i-triangle-up"></i><span>'+l.L("Ui_Btn_Packup")+'</span></a>								<div class="dot-line"></div>							</div>							<div class="server-box J-allserver" style="display:none;">								<h4 class="focal-tit">'+l.L("Ui_txt_AllServers")+'</h4>								<div class="tab-card">									<ul class="tab-menu"></ul>								</div>							</div> 						</div>					</div>'},d=function(e){this.init(e)};d.prototype=$.extend(r(),{init:function(e){this.initElements(e),this.initServerDatas(),this.getServerTypes(),this.initRecommendedServers(),!e.noLastPlay&&this.initLastPlayServers(),this.bindEvents()},initElements:function(e){this.game=e.game,this.serverDatas=e.datas,this.$wrapper=$(e.wrapper),this.$wrapper.length||(this.$wrapper=$(c.serverPicker).appendTo("body")),this.$searchInput=$(e.searchInput||this.$wrapper.find(".server-no input")),this.$searchBtn=$(e.searchBtn||this.$wrapper.find(".server-no .btn")),this.$tabsContainer=$(e.tabsContainer||this.$wrapper.find(".tab-menu")),this.$allServerContainer=$(e.allServerContainer||this.$wrapper.find(".J-allserver")),this.$lastPlayServerContainer=$(e.lastPlayServerContainer||this.$wrapper.find(".J-lastplay")),this.$recommendedServerContainer=$(e.recommendedServerContainer||this.$wrapper.find(".J-recommended")),this.$resultServerContainer=$(e.resultServerContainer||this.$wrapper.find(".options ul")),this.$resultContainer=$(e.resultContainer||this.$wrapper.find(".options")),this.tabContents={},this.tabItemTpl=e.tabItemTpl||c.tabItem,this.tabContentTpl=e.tabContentTpl||c.tabContent,this.serverItemTpl=e.serverItemTpl||c.serverItem,this.tabEvent=e.tabEvent||"click",this.tabCurrentCls=e.tabCurrentCls||"",this.recommendedNum=Number(e.recommendedNum)||3,this.servers={},this.serverDataBlocks={},this.serverBlocks={},this.pageTexts=[],this.results=[],this.resultServers={},this.lastPlayServers={},this.recommendedServerDatas={},this.recommendedServers={},this.searchSug=new o({input:this.$searchInput,container:this.$resultContainer,itemContainer:this.$resultServerContainer,itemTpl:this.resultItemTpl||c.resultItemTpl,currentCls:this.resultCurrentCls||"current",maxNum:5})},initServerDatas:function(){var e=this;$.each(this.serverDatas,function(t){this.id=t,this.servernum=+this.servernum,this.parent=e}),this.oServerDatas=this.serverDatas,this.serverDatas=h(this.serverDatas,"id").reverse()},getServerTypes:function(){var e=this;$.getJSON(n.BASE_URL+"/?ct=game&ac=serverType&jsoncallback=?&game_id="+this.game,function(t){e.serverTypeRank=t,e.blockServers(),e.initAllServers()})},bindEvents:function(){var e=this;this.$searchInput.on("focus",function(){this.value===this.defaultValue&&(this.value="")}).on("blur",function(){this.value||(this.value=this.defaultValue)}).on("keydown",function(t){e.searchSug.$container.is(":visible")&&t.stopPropagation()}),this.searchSug.on("toSug",function(){e.getSearchResult();var t=[];$.each(e.results,function(){t.push({text:this.servername,id:this.id,href:e.servers[this.id].$ele.find("a").attr("href")})}),this.updateItems(t),t.length?this.show():this.hide()}),this.searchSug.on("select",function(){window.location.href=this.datas[this.index].href}),this.$searchBtn.on("click",function(){e.searchSug.datas&&e.searchSug.datas.length&&(window.location.href=e.searchSug.datas[e.searchSug.index>=0?+e.searchSug.index:0].href)}),this.searchSug.on("keyHover",function(){e.$searchBtn.is("a")&&e.$searchBtn.attr("href",this.datas[this.index].href)}),this.on("initAllServers",function(){e.$tabsContainer.children().on(e.tabEvent,function(){var t=$(this).data("type");$(this).addClass(e.tabCurrentCls).siblings().removeClass(e.tabCurrentCls),$.each(e.tabContents,function(e,i){e===t?i.show():i.hide()}),e.emit("tabTo",t)})}),this.on("select",function(){this.searchSug.hide()})},blockServers:function(){var e=this;$.each(this.serverDatas,function(){this.container=e.$allServerContainer,"undefined"==typeof this.type&&(this.type="All"),e.serverDataBlocks[this.type]||(e.serverDataBlocks[this.type]=[]),e.serverDataBlocks[this.type].push(this)}),this.blocksArray=[],0==this.serverTypeRank.length&&(this.serverTypeRank=[{name:"All"}]),$.each(this.serverTypeRank,function(){var t=this.name;$.each(e.serverDataBlocks,function(i){i===t&&e.blocksArray.push({typeName:t,serversDatas:this})})})},initRecommendedServers:function(){var e=this;this.recommendedServerDatas={};var t=0;$.each(this.serverDatas,function(){return++t>e.recommendedNum?!1:(e.recommendedServerDatas[this.id]=this,void(e.recommendedServers[this.id]=new s($.extend(this,{container:e.$recommendedServerContainer,is_recommend:1}))))}),this.emit("initRecommendedServers")},initLastPlayServers:function(){var e=this;this.$lastPlayServerContainer.empty(),$.getJSON(n.LAST_PLAY_GAME_API+"&game_id="+this.game+"&jsoncallback=?",function(t){$.each(t.data,function(){if(e.oServerDatas[this.server_id]){var t=$.extend(e.oServerDatas[this.server_id],{container:e.$lastPlayServerContainer,is_lastplay:1});e.lastPlayServers[this.server_id]=new s(t)}}),e.emit("initLastPlayServers")})},initAllServers:function(){var e=this,t=0;$.each(this.blocksArray,function(){var i=this.typeName;$(a(e.tabItemTpl,{text:i,counter:t,currentCls:e.tabCurrentCls})).data("type",i).appendTo(e.$tabsContainer);var n=$(a(e.tabContentTpl,{counter:t})).appendTo(e.$allServerContainer);e.tabContents[i]=n;var r;n.is("[data-servers_container]")?r=n:(r=n.find("[data-servers_container]"),r.length||(r=n)),$.each(this.serversDatas,function(){e.servers[this.id]=new s($.extend(this,{container:r}))}),t++}),this.emit("initAllServers")},getSearchResult:function(){var e=this,t=[],i=$.trim(this.$searchInput.val());$.each(this.servers,function(){this.filter(i),this.weight>=0&&t.push(e.servers[this.id])}),this.results=h(t,"weight")}}),s.prototype=$.extend(r(),{init:function(e){this.initElements(e),this.bindEvents()},initElements:function(e){this.parent=e.parent,this.game=this.parent.game,this.id=e.id,this.status=e.status,this.servernum=e.servernum,this.servername=e.servername,this.serverdesc=e.server_desc,this.is_hot=e.is_hot,this.is_new=e.is_new,this.is_bonus=e.is_bonus,this.is_recommend=e.is_recommend,this.is_lastplay=e.is_lastplay,this.serverTpl=e.parent.serverItemTpl,this.$container=e.container,this.$ele=$(a(this.serverTpl,{game_id:this.game,status:this.status,servername:this.servername,servernum:this.servernum,is_hot:this.is_hot,is_new:this.is_new,is_bonus:this.is_bonus,is_recommend:this.is_recommend,is_lastplay:this.is_lastplay,id:this.id})).appendTo(this.$container),this.weight=0},bindEvents:function(){var e=this;this.$ele.on("click",function(){e.select()})},filter:function(e){this.weight=-1;var t=this.servername.toLowerCase().indexOf(e.toLowerCase());t>=0&&(this.weight=t)},select:function(){this.parent.selectedServer=this,this.parent.emit("select")}}),$.fn.serverPicker=function(e){var t=new d($.extend({wrapper:this,datas:e.re,game:e.game,tabCurrentCls:e.tabCurrentCls||"current",tabsContainer:this.find(".tab-menu"),recommendedServerContainer:this.find(".J-recommended"),allServerContainer:this.find(".J-allserver"),lastPlayServerContainer:this.find(".J-lastplay"),searchInput:this.find(".server-no input"),searchBtn:this.find(".server-no .btn"),resultContainer:this.find(".options"),resultServerContainer:this.find(".options ul")},e));return t.on("initLastPlayServers",function(){!$.isEmptyObject(this.lastPlayServers)&&this.$lastPlayServerContainer.parents(".server-box").show()}),this.data("server_picker",t),this},i.ServerPicker=d,i._name="ServerPicker"},{"../global":17,"../lang.js":18,"../plugins/events":25,"../plugins/parseTpl":28,"../plugins/resortByAttr":30,"./sug":49}],48:[function(e,t,i){var s=e("../plugins/events"),n=[],r=function(e){this.init(e)};r.prototype=$.extend(s(),{init:function(e){this.initElements(e),this.bindEvents(),e.undragable||(this.dragable(),this.$title.css({cursor:"move"})),n.push(this)},initElements:function(e){this.hasCover="hasCover"in e?e.hasCover:!0,this.withScroll="withScroll"in e?e.withScroll:!0,this.$dialog=$(e.dialog),e.width&&this.$dialog.css("width",e.width),e.height&&this.$dialog.css("width",e.height),this.lifeTime="lifeTime"in e?e.lifeTime:"",this.defaultPos=e.defaultPos||{x:.5,y:.3};var t={$title:this.$dialog.find(".hd"),$closeBtn:this.$dialog.find(".close")};this.$title=$(e.title||(t.$title.length?t.$title:"<div></div>")),this.$closeBtn=$(e.closeBtn||(t.$closeBtn.length?t.$closeBtn:"<div></div>")),this.posType=e.posType||"fixed",this.$dialog.css({position:this.posType}),this.$iframeMask=$('<iframe style="display: none;position: absolute;left: 0;top: 0;opacity: .5;filter: alpha(opacity=50);z-index: 9998;border: none;width: '+$(document).width()+"px;height: "+$(document).height()+'px;"></iframe>').appendTo("body"),this.$cover=$('<div style="display: none;position: absolute;left: 0;top: 0;background: #000;opacity: .7;filter: alpha(opacity=70);z-index: 9999;width: '+$(document).width()+"px;height: "+$(document).height()+'px;"></div>').appendTo("body")},bindEvents:function(){var e,t=this;if($(window).on("resize",function(){t.hasCover&&t.resetCover(),e&&clearTimeout(e),e=setTimeout(function(){t.setPos(t.defaultPos.x,t.defaultPos.y)},100)}),"absolute"===this.posType&&this.withScroll){var i;$(window).on("scroll",function(){i&&(clearTimeout(i),i=null),setTimeout(function(){t.setPos(t.defaultPos.x,t.defaultPos.y)},100)})}this.$closeBtn.on("click",function(e){return e.stopPropagation(),t.hide(),!1});var s;this.on("show",function(){s&&(clearTimeout(s),s=null),this.$dialog.css("z-index",1e4),this.lifeTime&&(s=setTimeout(function(){t.hide()},this.lifeTime))}),this.on("show",function(){this.setPos(t.defaultPos.x,t.defaultPos.y)}),$(document).on("keydown",function(e){27===e.keyCode&&t.$dialog.is(":visible")&&t.hide()})},show:function(){this.$dialog.show(),this.hasCover&&this.resetCover(),this.setIframeMask(),this.hasCover&&this.$cover.show(),this.emit("show")
},hide:function(){this.$dialog.hide(),this.hasCover&&this.$cover.hide(),this.$iframeMask.hide(),this.emit("hide")},setMidPos:function(){this.setPos(.5,.5)},setPos:function(e,t){e=+e||.5,t=+t||.5;var i=$(window);this.$dialog.css({position:this.posType,top:("absolute"===this.posType?i.scrollTop():0)+Math.max(10,i.height()*t-Math.min(this.$dialog.outerHeight()/2,i.height()*t)),left:("absolute"===this.posType?i.scrollLeft():0)+i.width()*e-Math.min(this.$dialog.outerWidth()/2,i.width()*e)})},resetCover:function(){this.$cover.width($(document).width()).height($(document).height())},setIframeMask:function(){this.hasCover?this.$iframeMask.css({width:$(document).width(),height:$(document).height(),top:0,left:0}).show():this.$iframeMask.css({width:this.$dialog.width(),height:this.$dialog.height(),top:$w.scrollTop()+$w.height()/2-this.$dialog.outerHeight()/2,left:$w.scrollLeft()+$w.width()/2-this.$dialog.outerWidth()/2}).show()},dragable:function(){var e=this;this.$title.on("mousedown",function(t){var i=e.$dialog.offset(),s=t.pageX,n=t.pageY;e.dragGap={x:s-i.left,y:n-i.top},e.draging=!0}),$(document).on("mouseup",function(){e.draging=!1}),$(document).on("mousemove",function(t){if(e.draging){var i=(e.$dialog.offset(),t.pageX),s=t.pageY;e.$dialog.css({position:e.posType,left:i-e.dragGap.x-("fixed"===e.posType?$(window).scrollLeft():0),top:s-e.dragGap.y-("fixed"===e.posType?$(window).scrollTop():0)}),!e.hasCover&&e.$iframeMask.css({position:e.posType,left:i-e.dragGap.x-("fixed"===e.posType?$(window).scrollLeft():0),top:s-e.dragGap.y-("fixed"===e.posType?$(window).scrollTop():0)})}})},update:function(e){"title"in e&&(this.$title.find("b").html(e.title),e.title||this.$title.hide()),e.content&&this.$dialog.html(e.content),"hasCover"in e&&(this.hasCover=e.hasCover),e.width&&!isNaN(+e.width)&&(this.$dialog.width(e.width),this.setPos(.5,.3)),e.height&&!isNaN(+e.height)&&(this.$dialog.height(e.height),this.setPos(.5,.3)),this.emit("update")}}),i.Dialog=r,i.dialogs=n},{"../plugins/events":25}],49:[function(e,t){function i(e){this.init(e)}var s=e("../plugins/events"),n=e("../plugins/parseTpl");i.prototype=$.extend(s(),{init:function(e){this.initElemetns(e),this.bindEvents(),e.noDefaultEvents||this.bindDefaultEvents()},initElemetns:function(e){this.$input=$(e.input),this.$input=this.$input.is('input[type="text"],input[type="password"],textarea')&&this.$input.length?this.$input:$('<input type="text" />'),this.$ref=$(e.ref),this.$ref=this.$ref.length?this.$ref:this.$input,this.$container=$(e.container),this.$container=this.$container.length?this.$container:$('<div style="display:none;"></div>').appendTo("body"),this.$itemContainer=$(e.itemContainer),this.$itemContainer=this.$itemContainer.length?this.$itemContainer:$("<ul></ul>").appendTo(this.$container),this.itemTpl=e.itemTpl||'<li><a href="<% if(this.href){ %><% this.href %><% } else { %>javascript:;<% } %>"><% this.text %></a></li>',this.itemTag=e.itemTag||/<(.*?)>/.exec(this.itemTpl)[1],this.hoverCls=e.hoverCls||"",this.currentCls=e.currentCls||"",this.maxNum=+e.maxNum||10,this.index="",this.selectEvent=e.selectEvent||"click"},bindEvents:function(){var e=this;this.$input.attr("autocomplete","off").on("keydown",function(t){if(e.$container.is(":visible")){var i=e.index,s=e.$itemContainer.children(),n=""!==e.index?s.eq(e.index):null,r=s.length,o=t.keyCode;return 38===o?(""===i&&(i=0),e.index=(--i+r)%r,e.keyHover(),!1):40===o?(""===i&&(i=-1),e.index=++i%r,e.keyHover(),!1):void(13===o?n&&e.select(n):27===t.keyCode&&e.hide())}}).on("click",function(e){e.stopPropagation()}),this.$itemContainer.on(this.selectEvent,this.itemTag,function(){e.select(this),e.hide()}),$("html,body").on("click",function(){e.hide()}),this.hoverCls&&this.$itemContainer.on("mouseover",this.itemTag,function(){$(this).addClass(e.hoverCls).siblings().removeClass(e.hoverCls)}),this.on("updateItems",function(){e.reset()})},bindDefaultEvents:function(){var e=this;this.on("select",function(){e.$input.val(e.$currentItem.text()).trigger("select")});var t,i={38:"1",40:"1",27:"1"};this.$input.on("keyup",function(s){if(!(s.keyCode in i)){var n=e.$input.data("preVal");t&&(clearTimeout(t),t=null),t=setTimeout(function(){var t=$.trim(e.$input.val());t?t!==n?(e.emit("toSug"),e.$input.data("preVal",t)):e.$itemContainer.is(":empty")||27===s.keyCode||e.show():(e.$input.data("preVal",""),e.$itemContainer.empty(),e.hide())},150)}}).on("focus",function(){$.trim(this.value)&&($(this).trigger("keyup"),e.$itemContainer.is(":empty")||e.show())})},keyHover:function(){var e=this.$itemContainer.children();this.$currentItem=e.removeClass(this.currentCls).eq(this.index).addClass(this.currentCls),this.$input.val(this.$currentItem.text()),this.$input.trigger("select"),this.emit("keyHover")},updateItems:function(e){var t=this;e instanceof Array&&e.length&&(this.datas=e,this.$itemContainer.empty(),$.each(e,function(e){t.$itemContainer.append(n(t.itemTpl,this));return e===t.maxNum-1?!1:void 0}),this.emit("updateItems"))},select:function(e){this.$currentItem=$(e),this.index=this.$itemContainer.children().index(this.$currentItem),this.emit("select")},updatePos:function(){var e=this.$ref.offset(),t=this.$ref.outerHeight();this.$container.css({position:"absolute",left:e.left,top:e.top+t})},show:function(){this.$container.show(),this.emit("show")},hide:function(){this.$container.hide(),this.emit("hide")},reset:function(){this.index="",this.$currentItem=null}}),t.exports=i},{"../plugins/events":25,"../plugins/parseTpl":28}],50:[function(e,t){function i(e){this.init(e)}var s=e("../plugins/events"),n=[];i.prototype=$.extend(s(),{init:function(e){this.initElemtents(e),this.bindEvents(),this.tabTo(this.tabIndex)},initElemtents:function(e){this.$tabs=$(e.tabs),this.$tabContents=$(e.tabContents),this.currentTabCls=e.currentTabCls||"",this.tabIndex=e.tabIndex||0,this.tabEvent=e.tabEvent||"click",n.push(this)},bindEvents:function(){var e=this;this.$tabs.on(this.tabEvent,function(){var t=e.$tabs.index(this);e.tabTo(t)})},tabTo:function(e){this.tabIndex=e,this.$tabs.removeClass(this.currentTabCls).eq(this.tabIndex).addClass(this.currentTabCls),this.$tabContents.hide().eq(this.tabIndex).show(),this.emit("tabTo")}}),t.exports={Tab:i,tabs:n}},{"../plugins/events":25}],51:[function(e,t){function i(e){this.options=e,this.$form=$(e.form),this.$form=this.$form.length?this.$form:$("<form></form>"),this.eles={};var t=this;$.each(e.eles,function(e){this.name=e,this.ele=t.$form.find('[name="'+e+'"]'),this.ele.length&&(t.eles[e]=new SingleValidator(this))})}var s=e("../plugins/events"),n=e("../plugins/promise");$.fn._val=function(){{var e="";this.length}return this.each(function(t){var i=this.nodeName.toLowerCase(),s=this.type?this.type.toLowerCase():"text";"input"===i?"text"===s||"password"===s?e=this.value:"radio"===s?$(this).is(":checked")&&(e=this.value):"checkbox"===s&&$(this).is(":checked")&&(e+=this.value+(t===length?"":",")):e=this.value}),e},i.prototype=$.extend(s(),{validate:function(){var e,t,i=this;this.flag=(new Date).getTime()+1e4*Math.random(),$.each(this.eles,function(){var s=this,r=function(e,t){!function(n){s.once("tvpass",function(){n&&n===i.flag&&e()}),s.once("tvnopass",function(){n&&n===i.flag&&t(this.name+" "+this.reason)})}(i.flag),s.validate(1)},o=function(e){i.emit("nopass",e)};e?t=t.then(r,o):(e=new n(r,o),t=e)}),t.then(function(e){i.emit("pass"),e()}),e.run()}}),SingleValidator=function(e){this.init(e),this.emit("init",e)},SingleValidator.prototype=$.extend(s(),{init:function(e){this.initElements(e),this.bindEvents()},initElements:function(e){this.$ele=$(e.ele),this.name=e.name,this.event=e.event||"blur",this.eventDelay=e.eventDelay||1,this.required=e.required,this.regExp=e.regExp,"string"==typeof this.regExp?this._reg=new RegExp(this.regExp):"function"==typeof this.regExp?this._reg=this.regExp:this.regExp instanceof RegExp&&(this._reg=this.regExp),this.dependon=e.dependon,this.dependon?this.$dependon=$(this.dependon):"",this.otherValidator=e.myValidator,this.pass=!1,this.reason=""},bindEvents:function(){var e=this;this.$ele.on(this.event,function(){e.delayTimer&&(clearTimeout(e.delayTimer),e.delayTimer=null),e.delayTimer=setTimeout(function(){e.validate()},e.eventDelay)}),this.dependon&&this.$dependon.length&&this.$dependon.on(this.event,function(){$.trim(e.$ele._val())&&e.validate()})},validate:function(e){this.pass=!1,this.reason="",this.isTotalValidate=e;return this.required&&!this.v_required()?(this.reason="required",this.toError(),!1):this.$ele._val()&&this._reg&&!this.v_reg()?(this.reason="regExp",this.toError(),!1):this.$ele._val()&&this.dependon&&this.$dependon.length&&!this.v_dependon()?(this.reason="dependon",this.toError(),!1):this.$ele._val()&&this.otherValidator?void this.v_other():(this.toSuccess(),!0)},v_required:function(){return $.trim(this.$ele._val())?!0:!1},v_reg:function(){return this._reg instanceof RegExp&&this._reg.test(this.$ele._val())?!0:"function"==typeof this._reg&&this._reg(this)?!0:!1},v_dependon:function(){return this.$ele._val()===(this.$dependon._val()||this.$dependon.text())?!0:!1},v_other:function(){this.otherValidator&&"function"==typeof this.otherValidator&&this.otherValidator(this)},toError:function(){this.pass=!1,this.emit("nopass"),this.isTotalValidate&&this.emit("tvnopass")},toSuccess:function(){this.pass=!0,this.reason="",this.emit("pass"),this.isTotalValidate&&this.emit("tvpass")}}),t.exports=i},{"../plugins/events":25,"../plugins/promise":29}],52:[function(e,t){function i(e){var t=new s({game:e.game,datas:e.datas,tabCurrentCls:e.tabCurrentCls||"current",wrapper:e.wrapper,serverItemTpl:e.serverItemTpl,tabContentTpl:e.tabContentTpl}),i=$(t.$wrapper.find(".J-showmore")),a=$(t.$wrapper.find(".J-hidemore"));i.on("click",function(){t.$allServerContainer.show(),a.show(),i.hide(),l.setPos(.5,.3)}),a.on("click",function(){t.$allServerContainer.hide(),a.hide(),i.show(),l.setPos(.5,.3)}),t.on("initLastPlayServers",function(){var e=this.$lastPlayServerContainer.parents(".server-box");$.isEmptyObject(this.lastPlayServers)?e.hide():e.show()}),t.$wrapper.find(".J-codelink").attr("href","//"+e.name+".r2games.com/code/");var l=new n({dialog:t.$wrapper,title:t.$wrapper.find(".hd"),closeBtn:t.$wrapper.find(".close")});l.on("show",function(){l.setPos(.5,.3)});var h=/(\?|&)server_pick=(.*?)(&|$)/.exec(location.search);return(h&&"1"===h[2]||window.server_pick)&&(r.is_login()||1==e.noLoginValid?l.show():(o.open("login"),o.once("success",function(){t.initLastPlayServers(),l.show()}))),$(".J-server-picker").on("click",function(e){return e.stopPropagation(),e.cancleBubble=!0,l.show(),!1}),document.createStyleSheet?document.createStyleSheet("//r2cdn2.r2games.com/en/www/css/pack/choose_server.css",0):$('<link rel="stylesheet" href="//r2cdn2.r2games.com/en/www/css/pack/choose_server.css"/>').prependTo("head"),{serverPicker:t,popup:l,css:$('link[href="//r2cdn2.r2games.com/en/www/css/pack/choose_server.css"]')}}var s=e("./server_picker").ServerPicker,n=e("./simpleDialog").Dialog,r=e("../user/auth"),o=(e("../plugins/dialog"),e("../lang"),e("../global"),e("../user/win"));t.exports.init=i},{"../global":17,"../lang":18,"../plugins/dialog":24,"../user/auth":53,"../user/win":59,"./server_picker":47,"./simpleDialog":48}],53:[function(e,t,i){var s=e("../plugins/Cookie"),n=e("../global"),r={};i.is_login=function(){return s.cookie("r2_auth")?!0:!1},i.get_uid=function(){return s.cookie("r2_uid")},i.get_nid=function(){return s.cookie("r2_uid")},i.get_account=function(){return s.cookie("r2_account")},i.get_open_plat=function(){return s.cookie("r2_open_plat")},i.get_name=function(){return s.cookie("r2_name")},i.get_user_img=function(){var e=s.cookie("r2_user_img");return-1===e.indexOf("http")&&(e=n.STATIC_URL+"/userimg/"+(e||"u1")+"/183_183.png"),e},i.login_out=function(t){var i=e("../global").LOGIN_OUT_URL;$.getJSON(i+"&jsoncallback=?",function(){t()})},i.get_user_safe_level=function(){return s.cookie("r2_security_rank")},i.get_user_level=function(e){return r.user_level?void e(user_level):void $.getJSON(n.BASE_URL+"/user/?ac=getMyLevel&jsoncallback=?",function(t){t.status&&(r.user_level=t.data,e(t.data))})},i.get_privilege=function(e){return r.privilege?void e(r.privilege):void $.getJSON(n.BASE_URL+"/user/?ac=myPrivilegeIcon&jsoncallback=?",function(t){t.status&&(r.privilege=t.data,e(t.data))})}},{"../global":17,"../plugins/Cookie":21}],54:[function(e,t){var i=e("../plugins/events"),s=e("./auth"),n=e("../global");t.exports=$.extend(i(),{lastPlayGames:[],lastPlayServers:{},characters:{},noReadNum:{},getLastPlayGames:function(){var e=this;!function(t){$.getJSON(n.LAST_PLAY_GAME_API+"&jsoncallback=?",function(i){if(i.state&&s.get_name()===t){for(var n={},r=0,o=i.data.length;o>r;r++){var a=i.data[r].game_name;n[a]||(n[a]=1,e.lastPlayGames.push({game:i.data[r].game,game_id:i.data[r].game_id,game_name:i.data[r].game_name,game_type:i.data[r].game_type,game_url:i.data[r].game_url,game_h:i.data[r].game_h}))}e.emit("getLastPlayGamesDone")}})}(s.get_name())},getLastPlayServers:function(e,t){var i=this;!function(e,r){$.getJSON(n.LAST_PLAY_GAME_API+"&jsoncallback=?&game_id="+(r||"")+"&num="+(t||""),function(t){t.state&&s.get_name()===e&&(i.lastPlayServers[r]=t.data,i.emit("getLastPlayServersDone"))})}(s.get_name(),e)},getNoReadMsgs:function(){!function(){}(s.get_name())},getCharacter:function(){}})},{"../global":17,"../plugins/events":25,"./auth":53}],55:[function(require,module,exports){function Login(e){this.init(e)}var events=require("../plugins/events"),Validator=require("../ui/validator");Login.prototype=$.extend(events(),{init:function(e){this.initElements(e),this.bindEvents()},initElements:function(e){this.loginUrl=require("../global").LOGIN_URL,this.loginData={login_id:"",login_pwd:"",code:"",keep_login:""},this.$form=$(e.form||"body"),this.$loginId=this.$form.find(e.loginId||'[name="login_id"]'),this.$password=this.$form.find(e.password||'[name="login_pwd"]'),this.$keepLogin=this.$form.find(e.keepLogin||'[name="keep_login"]'),this.$code=this.$form.find(e.code||'[name="code"]'),this.$submitBtn=this.$form.find(e.submitBtn||"[data-submit_btn]"),this.submitType=e.submitType||"ajax",this.validator=new Validator($.extend({form:this.$form,eles:{login_id:{ele:this.$loginId,required:!0},login_pwd:{ele:this.$password,required:!0}}},e.validatorConfig||{}))},bindEvents:function(){var e=this;this.$submitBtn.on("click",function(){e.submit()});var t=this.$submitBtn;$(document).keyup(function(e){13==e.which&&t.is(":visible")&&t.trigger("click")}),this.$form.on("submit",function(){return e.submit(),!1}),e.validator.on("pass",function(){"ajax"===e.submitType&&e.postLogin()}),e.validator.on("nopass",function(){e.submitting=!1}),e.validator.eles.login_id.on("pass",function(){e.loginData.login_id=$.trim(e.$loginId.val())}),e.validator.eles.login_pwd.on("pass",function(){e.loginData.login_pwd=$.trim(e.$password.val())}),"ajax"===e.submitType&&e.$form.on("submit",function(){return!1})},postLogin:function(){var self=this;this.loginData.keep_login=this.$keepLogin.is(":checked")?1:0,"he"==window.from?$.get(this.loginUrl+"&"+$.param(this.loginData)+"&from="+(window.from||""),function(re){return re=eval("("+re+")"),self.submitting=!1,self.logResult=re,re.state?void self.emit("login"):void self.emit("faild",re.msg)}):$.getJSON(this.loginUrl+"&jsoncallback=?&"+$.param(this.loginData)+"&from="+(window.from||""),function(e){return self.submitting=!1,self.logResult=e,e.state?void self.emit("login"):void self.emit("faild",e.msg)})},submit:function(){this.submitting||(this.submitting=!0,this.validator.validate())}}),module.exports=Login},{"../global":17,"../plugins/events":25,"../ui/validator":51}],56:[function(require,module,exports){function Reg(e){this.init(e)}var events=require("../plugins/events"),Validator=require("../ui/validator"),global=require("../global");Reg.prototype=$.extend(events(),{init:function(e){this.initElements(e),this.bindEvents()},initElements:function(e){this.regData=$.extend({login_id:"",password:""},window.regConf),this.$form=$(e.form||"body"),this.$account=this.$form.find(e.account||'[name="account"]'),this.$email=this.$form.find(e.email||'[name="email"]'),this.$password=this.$form.find(e.password||'[name="password"]'),this.$agree1=this.$form.find(e.agree1||'[name="agree1"]'),this.$agree2=this.$form.find(e.agree2||'[name="agree2"]'),this.$submitBtn=this.$form.find(e.submitBtn||"[data-submit_btn]"),this.fields={account:this.$account.length,email:this.$email.length,password:this.$password.length,agree1:this.$agree1.length,agree2:this.$agree1.length},this.submitType=e.submitType||"ajax";var t=this,i={},s={account:{required:!0},email:{required:!0,regExp:/^\w+([\.-]\w+)*@\w+([\.-]\w+)*\.\w+([-\.]\w+)*$/,myValidator:function(e){var s=$.trim(t.$email.val());return s in i?(e.reason="exists",void e.toError()):void e.toSuccess()}},password:{required:!0,regExp:/^\S{8,36}$/},agree1:{required:!0},agree2:{required:!0}},n={};for(var r in this.fields)this.fields[r]&&(n[r]=s[r]);this.validator=new Validator($.extend({form:this.$form,eles:n},e.validatorConfig||{}))},bindEvents:function(){var e=this;this.$submitBtn.on("click",function(){e.submit()});var t=this.$submitBtn;$(document).keyup(function(e){13==e.which&&t.is(":visible")&&t.trigger("click")}),e.validator.on("pass",function(){"ajax"===e.submitType&&e.reg()}),e.validator.on("nopass",function(){e.submitting=!1}),this.fields.account&&e.validator.eles.account.on("pass",function(){e.regData.account=$.trim(e.$account.val())}),this.fields.email&&e.validator.eles.email.on("pass",function(){e.regData.login_id=$.trim(e.$email.val())}),this.fields.password&&e.validator.eles.password.on("pass",function(){e.regData.password=$.trim(e.$password.val())}),"ajax"===e.submitType&&e.$form.on("submit",function(){return!1})},reg:function(){var self=this;"he"==window.from?$.get(global.REG_URL+"&"+$.param(this.regData),function(re){return re=eval("("+re+")"),self.submitting=!1,re.state?void self.emit("reg"):void self.emit("faild",re.msg)}):$.getJSON(global.REG_URL+"&jsoncallback=?&"+$.param(this.regData),function(e){return self.submitting=!1,e.state?void self.emit("reg"):void self.emit("faild",e.msg)})},submit:function(){this.submitting||(this.submitting=!0,this.validator.validate())}}),module.exports=Reg},{"../global":17,"../plugins/events":25,"../ui/validator":51}],57:[function(e,t,i){function s(e,t){var i={facebook:{width:1024,height:680,top:200},yahoo:{width:960,height:580,top:200},google:{width:960,height:680,top:200},live:{width:960,height:620,top:200}},s={width:960,height:620,top:200};"undefined"!=typeof i[e]&&(s=i[e]);var n=($(l).width()-s.width)/2;0>n&&(n=0),l.open(t,e,"width="+s.width+",height="+s.height+",top="+s.top+",left="+n+",menubar=0,scrollbars=1,resizable=1,status=1,titlebar=0,toolbar=0,location=1")}function n(){l.openid_login_handler=function(){function e(){var e="{";for(var i in t)0===i.indexOf("r2_")&&(e+='"'+i+'":"'+t[i]+'",');return e.replace(/,$/,"")+"}"}if(a.emit("success"),window.external.HCIWebInvork){for(var t={},i=document.cookie.split(/;\s*/),s=0,n=i.length;n>s;s++){var r=i[s].split("=");t[r[0]]=r[1]}window.external.HCIWebInvork('{"type":"open_login", "data":{"state": true, "data": {"uid":"'+t.r2_uid+'", "nid":"'+t.r2_nid+'", "name":"'+t.r2_account+'", "user_img":"'+t.r2_user_img+'", "auth":"'+t.r2_auth+'", "cookies":'+e()+"}}")}}}var r=e("../global"),o=e("../plugins/events").EventEmitter;$.extend(this,new o);var a=this,l=window.isUserPopup?window.parent:window;document.domain=r.DOMAIN,$("a[data-openid]").each(function(){this.href="http://openid.r2games.com/?type="+$(this).attr("data-openid")+"&platform="+r.PLATFORM}),i.init=function(){$("body").delegate(".J-openid-login-btn,[data-openid]","click",function(){var e=($(this).attr("title")||"").replace(/\s/,"_"),t=$(this).attr("href");return s(e,t),!1}),n()}},{"../global":17,"../plugins/events":25}],58:[function(e){function t(){var t=e("./new_login"),i=a.get_open_plat()?"":a.get_account();i&&l.find('input[name="login_id"]').val(i).trigger("focus").trigger("blur");var s=new t({form:l});s.on("login",function(){a.emit("login")}),s.on("faild",function(e){e?a.emit("login_validate_error",e):a.emit("login_system_error")}),s.validator.on("nopass",function(e){a.emit("login_validate_error",e)}),a.login=function(){l.show(),this.emit("showLogin")},a.reg=function(){h.show(),this.emit("showReg")}}function i(){var t=e("./new_reg"),i=new t({form:h});i.on("reg",function(){a.emit("reg")}),i.on("faild",function(e){e?a.emit("reg_validate_error",e):a.emit("reg_system_error")}),i.validator.on("nopass",function(e){a.emit("reg_validate_error",e)}),window.reg=i}function s(){a.login=function(){r.open("login"),this.emit("showLogin")},a.reg=function(){r.open("reg",1),this.emit("showReg")},$("body").on("click","[data-login_btn]",function(){a.is_login()||a.login()})}var n=e("./openid"),r=e("./win"),o=e("../plugins/events"),a=$.extend(o(),e("./auth"));n.init();var l=$('.r2_login_form,[data-fn="login_form"],[data-login_form]'),h=$('.r2_reg_form,[data-fn="reg_form"],[data-reg_form]');!function(){l.length?t():s(),a.reg=function(){r.open("reg",1)},a.logout=function(){a.login_out(function(){a.emit("logout")})},n.on("success",function(){a.emit("login","openid")}),r.on("success",function(e){a.emit(e),window.location.reload()}),r.on("close",function(){a.emit("close_win")}),$("body").on("click","[data-reg_btn]",function(){a.reg()}),$("body").on("click","[data-logout_btn]",a.logout),h.length&&i(),window.user_action=a}()},{"../plugins/events":25,"./auth":53,"./new_login":55,"./new_reg":56,"./openid":57,"./win":59}],59:[function(e,t){function i(){var e=navigator.userAgent.toLowerCase(),t="ipad"==e.match(/ipad/i),i="iphone os"==e.match(/iphone os/i),s="midp"==e.match(/midp/i),n="rv:1.2.3.4"==e.match(/rv:1.2.3.4/i),r="ucweb"==e.match(/ucweb/i),o="android"==e.match(/android/i),a="windows ce"==e.match(/windows ce/i),l="windows mobile"==e.match(/windows mobile/i);(t||i||s||n||r||o||a||l)&&(f=320)}function s(t,i){var s=e("../global").USER_FORM_URL;i=i>3||1>i||!i?1:i,t="login"==t?"login":"reg",s+=(-1!==s.indexOf("?")?"&":"?")+"type="+t+"&status="+i;var r=p[t][i];if(d=t,u)h.open(),c.publish("set_type",t);else{$("body").append('<iframe name="'+l+'" id="'+l+'" src="" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" style="display:none; width: '+f+"px; height:"+r+'px"></iframe>');var m=$("#"+l);h=new n(m),h.open(),c=new o(m);var g=c.get_interface_id();s=s+"&frame_interface_id="+g,m.load(function(){c.subscription("user_popups_update",function(e){var t=$("#"+l);t.height(e)}),c.subscription("success",function(e){a.emit("success",e)}),c.subscription("close_win",function(){h.close(),a.emit("close")}),c.publish("set_type",t)}),m.attr("src",s),u=!0}}var n=e("../ui/popups"),r=e("../plugins/events").EventEmitter;$.extend(this,new r);var o=e("../plugins/iframe_events"),a=this,l="user_popups",h="",c="",d="login",u=!1,p={login:{1:356},reg:{1:469,2:469,3:451}},f=444;i(),t.exports.open=s},{"../global":17,"../plugins/events":25,"../plugins/iframe_events":26,"../ui/popups":46}]},{},[1]);